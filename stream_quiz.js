!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=254)}({102:function(t,e,n){var r=n(271),o=n(6).set;t.exports=function(t,e,n){var s,i=e.constructor;return i!==n&&"function"==typeof i&&(s=i.prototype)!==n.prototype&&r(s)&&o&&o(t,s),t}},106:function(t,e,n){var r=n(253),o=n(595),s=n(452)(!1),i=n(666)("IE_PROTO");t.exports=function(t,e){var n,u=o(t),a=0,c=[];for(n in u)n!=i&&r(u,n)&&c.push(n);for(;e.length>a;)r(u,n=e[a++])&&(~s(c,n)||c.push(n));return c}},135:function(t,e,n){var r=n(426),o="__core-js_shared__",s=r[o]||(r[o]={});t.exports=function(t){return s[t]||(s[t]={})}},14:function(t,e,n){"use strict";function r(t){return t.queue||t.key}function o(t){return window.curNotifier?!curNotifier.addQueues[r(t)]:!1}function s(t){return window.curNotifier?void!curNotifier.addQueues[r(t)]:!1}function i(){p.forEach(function(t,e){var n=t.onData,r=t.onUpdateKey,s=t.ts;o(e)&&Notifier.addKey(extend(e,{ts:s}),f.bind(null,n,r,e))})}function u(){_||(_=setInterval(i,3e3))}function a(t){s(t),p["delete"](t),0===p.size&&(clearInterval(_),_=!1)}function c(t,e,n,r){var o=void 0;switch(t){case 1:case 2:case 3:case 5:o=r(e,t);break;case 4:o=Object(d.pause)(1).then(function(){return e});break;default:throw new Error("Unkonwn error from queue: "+t)}Object(d.pause)(3).then(function(){return o}).then(function(t){p.set(t,{onUpdateKey:r,onData:n,ts:t.ts}),i(),u()})}function f(t,e,n,r,o){return o.failed?(a(n),void c(o.err,n,t,e)):(p.set(n,{onData:t,onUpdateKey:e,ts:intval(o.ts)}),void o.events.map(function(t){return t.split("<!>")}).forEach(t))}function l(t,e,n){return Notifier.addKey(t,f.bind(null,e,n,t)),p.set(t,{onData:e,onUpdateKey:n,ts:t.ts}),u(),{stop:a.bind(null,t)}}n.r(e),n.d(e,"createWorker",function(){return l});var h=n(504),d=n(681),p=new h,_=!1},144:function(t,e){t.exports=!1},145:function(t,e,n){var r=n(86),o=n(525),s=n(345),i=n(355),u=n(425),a=n(360);t.exports=function(t,e,n,c,f){var l,h,d,p=f?function(){return t}:a(t),_=r(n,c,e?2:1),v=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(s(p))for(l=u(t.length);l>v;v++)e?_(i(h=t[v])[0],h[1]):_(t[v]);else for(d=p.call(t);!(h=d.next()).done;)o(d,_,h.value,e)}},150:function(t,e,n){var r=n(285),o=n(355),s=n(702);t.exports=n(27)?Object.defineProperties:function(t,e){o(t);for(var n,i=s(e),u=i.length,a=0;u>a;)r.f(t,n=i[a++],e[n]);return t}},16:function(t,e,n){t.exports=n(426).document&&document.documentElement},164:function(t,e,n){t.exports=!n(27)&&!n(236)(function(){return 7!=Object.defineProperty(n(170)("div"),"a",{get:function(){return 7}}).a})},165:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},170:function(t,e,n){var r=n(271),o=n(426).document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},193:function(t,e,n){"use strict";var r=n(426),o=n(285),s=n(27),i=n(81)("species");t.exports=function(t){var e=r[t];s&&e&&!e[i]&&o.f(e,i,{configurable:!0,get:function(){return this}})}},236:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},25:function(t,e,n){var r=n(624);t.exports=function(t){return Object(r(t))}},253:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},254:function(t,e,n){t.exports=n(66)},26:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},261:function(t,e,n){var r=n(616),o=Math.max,s=Math.min;t.exports=function(t,e){return t=r(t),0>t?o(t+e,0):s(t,e)}},266:function(t,e,n){"use strict";function r(t,e,n){return e&&(e.im_v=u),new Promise(function(r,o){ajax.post(t,e,{timeout:n,onDone:function(){r.apply(null,[[].concat(Array.prototype.slice.call(arguments))])},onFail:function(){return o.apply(null,arguments),!0}})})}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=s(t,e,n),o=r.request;return o}function s(t,e){function n(){o.abort()}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0;o=window.XDomainRequest?new XDomainRequest:ajax._getreq();var s=new Promise(function(n,s){var i=void 0,u=Date.now(),a=r.timeout||60,c=ajx2q(e);if(window.XDomainRequest)o.open("get",t+"?"+c),o.ontimeout=function(){s(["",{}])},o.onerror=function(){s(["",{}])},o.onload=function(){n([o.responseText,{}])},setTimeout(function(){o.send()},0);else{o.onreadystatechange=function(){4==o.readyState&&(clearInterval(i),o.status>=200&&o.status<300?n([o.responseText,o]):s([o.responseText,o]))};try{o.open("GET",t+"?"+c,!0)}catch(f){return s([f,o])}o.send()}i=setInterval(function(){Date.now()-u>1e3*a&&(s(["",{}]),clearInterval(i))},1e3)});return{request:s,cancel:n}}n.r(e),n.d(e,"CONTROLLER",function(){return i}),n.d(e,"post",function(){return r}),n.d(e,"plainget",function(){return o}),n.d(e,"plaingetCancelable",function(){return s});var i="al_im.php",u=2},27:function(t,e,n){t.exports=!n(236)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},271:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},276:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},28:function(t,e,n){var r=n(407);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},281:function(t,e,n){var r=n(253),o=n(25),s=n(666)("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},285:function(t,e,n){var r=n(355),o=n(164),s=n(449),i=Object.defineProperty;e.f=n(27)?Object.defineProperty:function(t,e,n){if(r(t),e=s(e,!0),r(n),o)try{return i(t,e,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},290:function(t,e,n){"use strict";var r=n(443),o={};o[n(81)("toStringTag")]="z",o+""!="[object z]"&&n(530)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},305:function(t,e,n){"use strict";var r=n(608);t.exports=n(80)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},315:function(t,e,n){var r=n(81)("unscopables"),o=Array.prototype;void 0==o[r]&&n(434)(o,r,{}),t.exports=function(t){o[r][t]=!0}},331:function(t,e,n){var r=n(355),o=n(150),s=n(640),i=n(666)("IE_PROTO"),u=function(){},a="prototype",c=function(){var t,e=n(170)("iframe"),r=s.length,o=">";for(e.style.display="none",n(16).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+o),t.close(),c=t.F;r--;)delete c[a][s[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[a]=r(t),n=new u,u[a]=null,n[i]=t):n=c(),void 0===e?n:o(n,e)}},345:function(t,e,n){var r=n(396),o=n(81)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},355:function(t,e,n){var r=n(271);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},360:function(t,e,n){var r=n(443),o=n(81)("iterator"),s=n(396);t.exports=n(670).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||s[r(t)]:void 0}},37:function(t,e,n){"use strict";var r=n(331),o=n(700),s=n(644),i={};n(434)(i,n(81)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(i,{next:o(1,n)}),s(t,e+" Iterator")}},392:function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},396:function(t,e){t.exports={}},407:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},417:function(t,e,n){var r=n(81)("iterator"),o=!1;try{var s=[7][r]();s["return"]=function(){o=!0},Array.from(s,function(){throw 2})}catch(i){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var s=[7],i=s[r]();i.next=function(){n=!0},s[r]=function(){return i},t(s)}catch(u){}return n}},425:function(t,e,n){var r=n(616),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},426:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},434:function(t,e,n){var r=n(285),o=n(700);t.exports=n(27)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},443:function(t,e,n){var r=n(407),o=n(81)("toStringTag"),s="Arguments"==r(function(){return arguments}()),i=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=i(e=Object(t),o))?n:s?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},449:function(t,e,n){var r=n(271);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},452:function(t,e,n){var r=n(595),o=n(425),s=n(261);t.exports=function(t){return function(e,n,i){var u,a=r(e),c=o(a.length),f=s(i,c);if(t&&n!=n){for(;c>f;)if(u=a[f++],u!=u)return!0}else for(;c>f;f++)if((t||f in a)&&a[f]===n)return t||f;return!t&&-1}}},504:function(t,e,n){n(290),n(675),n(578),n(305),t.exports=n(670).Map},510:function(t,e,n){var r=n(616),o=n(624);t.exports=function(t){return function(e,n){var s,i,u=String(o(e)),a=r(n),c=u.length;return 0>a||a>=c?t?"":void 0:(s=u.charCodeAt(a),55296>s||s>56319||a+1===c||(i=u.charCodeAt(a+1))<56320||i>57343?t?u.charAt(a):s:t?u.slice(a,a+2):(s-55296<<10)+(i-56320)+65536)}}},512:function(t,e,n){var r=n(530);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},525:function(t,e,n){var r=n(355);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(s){var i=t["return"];throw void 0!==i&&r(i.call(t)),s}}},530:function(t,e,n){var r=n(426),o=n(434),s=n(253),i=n(26)("src"),u="toString",a=Function[u],c=(""+a).split(u);n(670).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,u){var a="function"==typeof n;a&&(s(n,"name")||o(n,"name",e)),t[e]!==n&&(a&&(s(n,i)||o(n,i,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:u?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[i]||a.call(this)})},535:function(t,e,n){"use strict";var r=n(144),o=n(78),s=n(530),i=n(434),u=n(253),a=n(396),c=n(37),f=n(644),l=n(281),h=n(81)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",_="keys",v="values",m=function(){return this};t.exports=function(t,e,n,y,g,w,x){c(n,e,y);var b,q,B,C=function(t){if(!d&&t in k)return k[t];switch(t){case _:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",L=g==v,S=!1,k=t.prototype,O=k[h]||k[p]||g&&k[g],E=O||C(g),P=g?L?C("entries"):E:void 0,j="Array"==e?k.entries||O:O;if(j&&(B=l(j.call(new t)),B!==Object.prototype&&(f(B,T,!0),r||u(B,h)||i(B,h,m))),L&&O&&O.name!==v&&(S=!0,E=function(){return O.call(this)}),r&&!x||!d&&!S&&k[h]||i(k,h,E),a[e]=E,a[T]=m,g)if(b={values:L?E:C(v),keys:w?E:C(_),entries:P},x)for(q in b)q in k||s(k,q,b[q]);else o(o.P+o.F*(d||S),e,b);return b}},569:function(t,e,n){var r=n(26)("meta"),o=n(271),s=n(253),i=n(285).f,u=0,a=Object.isExtensible||function(){return!0},c=!n(236)(function(){return a(Object.preventExtensions({}))}),f=function(t){i(t,r,{value:{i:"O"+ ++u,w:{}}})},l=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,r)){if(!a(t))return"F";if(!e)return"E";f(t)}return t[r].i},h=function(t,e){if(!s(t,r)){if(!a(t))return!0;if(!e)return!1;f(t)}return t[r].w},d=function(t){return c&&p.NEED&&a(t)&&!s(t,r)&&f(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:h,onFreeze:d}},578:function(t,e,n){for(var r=n(696),o=n(530),s=n(426),i=n(434),u=n(396),a=n(81),c=a("iterator"),f=a("toStringTag"),l=u.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;5>d;d++){var p,_=h[d],v=s[_],m=v&&v.prototype;if(m){m[c]||i(m,c,l),m[f]||i(m,f,_),u[_]=l;for(p in r)m[p]||o(m,p,r[p],!0)}}},579:function(t,e,n){var r=n(85),o=n(700),s=n(595),i=n(449),u=n(253),a=n(164),c=Object.getOwnPropertyDescriptor;e.f=n(27)?c:function(t,e){if(t=s(t),e=i(e,!0),a)try{return c(t,e)}catch(n){}return u(t,e)?o(!r.f.call(t,e),t[e]):void 0}},595:function(t,e,n){var r=n(28),o=n(624);t.exports=function(t){return r(o(t))}},6:function(t,e,n){var r=n(271),o=n(355),s=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(86)(Function.call,n(579).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:s}},608:function(t,e,n){"use strict";var r=n(285).f,o=n(331),s=(n(434),n(512)),i=n(86),u=n(392),a=n(624),c=n(145),f=n(535),l=n(276),h=n(193),d=n(27),p=n(569).fastKey,_=d?"_s":"size",v=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,f){var l=t(function(t,r){u(t,l,e,"_i"),t._i=o(null),t._f=void 0,t._l=void 0,t[_]=0,void 0!=r&&c(r,n,t[f],t)});return s(l.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[_]=0},"delete":function(t){var e=this,n=v(e,t);if(n){var r=n.n,o=n.p;delete e._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),e._f==n&&(e._f=r),e._l==n&&(e._l=o),e[_]--}return!!n},forEach:function(t){u(this,l,"forEach");for(var e,n=i(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!v(this,t)}}),d&&r(l.prototype,"size",{get:function(){return a(this[_])}}),l},def:function(t,e,n){var r,o,s=v(t,e);return s?s.v=n:(t._l=s={i:o=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=s),r&&(r.n=s),t[_]++,"F"!==o&&(t._i[o]=s)),t},getEntry:v,setStrong:function(t,e,n){f(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),h(e)}}},616:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},624:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},640:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},644:function(t,e,n){var r=n(285).f,o=n(253),s=n(81)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,s)&&r(t,s,{configurable:!0,value:e})}},66:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e);var o=n(14),s=n(266),i=function(){function t(t,e){var n=[],r=!0,o=!1,s=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(a){o=!0,s=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.StreamQuizAdmin=function(){function t(e,n,o){r(this,t),this.options=n||{},this.container=e,this.elements={nextQuestionButton:geByClass1("_sq_next_question",e),sendAnswersButton:geByClass1("_sq_send_answers",e),startGameButton:geByClass1("_sq_start_game",e),startGameStagingButton:geByClass1("_sq_start_game_staging",e),stopGameButton:geByClass1("_sq_stop_game",e),newGameVidInput:geByClass1("_sq_new_game_vid",e),sendPushesButton:geByClass1("_sq_send_pushes",e),sendWinnersButton:geByClass1("_sq_send_winners",e),questionStatusLabel:geByClass1("_sq_question_status",e),gameStatusLabel:geByClass1("_sq_game_status",e)},this.bindEvents(),this.updateState(o),window.sqa=this}return t.prototype.bindEvents=function(){addEvent(this.elements.nextQuestionButton,"click",this.nextQuestion.bind(this)),addEvent(this.elements.sendAnswersButton,"click",this.sendAnswers.bind(this)),addEvent(this.elements.startGameButton,"click",this.startGame.bind(this,0,!1)),addEvent(this.elements.startGameStagingButton,"click",this.startGame.bind(this,1,!1)),addEvent(this.elements.stopGameButton,"click",this.stopGame.bind(this)),addEvent(this.elements.sendPushesButton,"click",this.sendPushes.bind(this)),addEvent(this.elements.sendWinnersButton,"click",this.sendWinners.bind(this))},t.prototype.tempLockButton=function(t){var e=t.innerHTML;t.innerHTML="Ok!",disableButton(t,!0),setTimeout(function(){t.innerHTML=e,disableButton(t,!1)},3e3)},t.prototype.updateState=function(t){if(!t.game)return void(this.elements.gameStatusLabel.innerHTML="?");t.game.no_questions?(t.first_question?this.elements.questionStatusLabel.innerHTML="Первый вопрос: "+t.first_question.text:this.elements.questionStatusLabel.innerHTML="Вопросов ещё не задавали",addClass(this.elements.sendAnswersButton,"button_contour")):t.current_question?t.current_question.answer_set?(t.current_question.is_last?(this.elements.questionStatusLabel.innerHTML="Вопросы кончились",addClass(this.elements.nextQuestionButton,"button_contour")):(this.elements.questionStatusLabel.innerHTML="Следующий вопрос №"+(t.current_question.number+1),removeClass(this.elements.nextQuestionButton,"button_contour")),addClass(this.elements.sendAnswersButton,"button_contour")):(this.elements.questionStatusLabel.innerHTML="Вопрос №"+t.current_question.number+": "+t.current_question.text,addClass(this.elements.nextQuestionButton,"button_contour"),removeClass(this.elements.sendAnswersButton,"button_contour")):this.elements.questionStatusLabel.innerHTML="?";var e=t.game.is_staging?"Тестовая игра":"Игра";t.game.started?this.elements.gameStatusLabel.innerHTML=e+" запущена "+t.game.started_by_text:this.elements.gameStatusLabel.innerHTML=e+" остановлена"},t.prototype.request=function(t,e,n){e=extend({hash:this.options.hashes[t]},e||{}),n=extend({},{onFail:function(t){return showFastBox(getLang("global_error"),t||getLang("global_error_occured")),!0}},n||{}),ajax.post("/cleveradmin?act=a_"+t,e,n)},t.prototype.nextQuestion=function(){var t=this;this.request("send_next_question",{},{showProgress:lockButton.bind(this,this.elements.nextQuestionButton),hideProgress:unlockButton.bind(this,this.elements.nextQuestionButton),onDone:function(e){t.updateState(e),t.tempLockButton(t.elements.nextQuestionButton)}})},t.prototype.sendAnswers=function(){var t=this;this.request("send_answers",{},{showProgress:lockButton.bind(this,this.elements.sendAnswersButton),hideProgress:unlockButton.bind(this,this.elements.sendAnswersButton),onDone:function(e){t.updateState(e),t.tempLockButton(t.elements.sendAnswersButton)}})},t.prototype.startGame=function(t,e){var n=this;if(t||e)this.request("start_game",{vid:val(this.elements.newGameVidInput),is_staging:t},{showProgress:function(){lockButton(n.elements.startGameButton),lockButton(n.elements.startGameStagingButton)},hideProgress:function(){unlockButton(n.elements.startGameButton),unlockButton(n.elements.startGameStagingButton)},onDone:function(){n.tempLockButton(n.elements.startGameButton),n.tempLockButton(n.elements.startGameStagingButton)}});else var r=showFastBox("Подтверждение действия","Запускаем боевую игру?","Да",function(){r.hide(),n.startGame(t,!0)},"Отмена")},t.prototype.stopGame=function(){this.request("stop_game",{},{showProgress:lockButton.bind(this,this.elements.stopGameButton),hideProgress:unlockButton.bind(this,this.elements.stopGameButton),onDone:this.tempLockButton.bind(this,this.elements.stopGameButton)})},t.prototype.sendPushes=function(){this.request("send_pushes",{},{showProgress:lockButton.bind(this,this.elements.sendPushesButton),hideProgress:unlockButton.bind(this,this.elements.sendPushesButton),onDone:this.tempLockButton.bind(this,this.elements.sendPushesButton)})},t.prototype.sendWinners=function(){this.request("send_winners",{},{showProgress:lockButton.bind(this,this.elements.sendWinnersButton),hideProgress:unlockButton.bind(this,this.elements.sendWinnersButton),onDone:this.tempLockButton.bind(this,this.elements.sendWinnersButton)})},t}(),window.StreamQuizAdminQuestionEditor=function(){function t(e,n){r(this,t),this.options=n||{},this.container=e,this.elements={saveQuestionsButton:geByClass1("_sq_save_questions",e)},this.bindEvents()}return t.prototype.bindEvents=function(){addEvent(this.elements.saveQuestionsButton,"click",this.saveQuestions.bind(this));var t=geByClass("sq_edit_question_option",this.container),e=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var i=o.value;addEvent(i,"input",this.updateOptionTextLength.bind(this,i))}}catch(u){n=!0,r=u}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw r}}var a=geByClass("sq_edit_question_question",this.container),c=!0,f=!1,l=void 0;try{for(var h,d=a[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;addEvent(p,"input",this.updateQuestionTextLength.bind(this,p)),this.updateQuestionTextLength(p)}}catch(u){f=!0,l=u}finally{try{!c&&d["return"]&&d["return"]()}finally{if(f)throw l}}var _=!0,v=!1,m=void 0;try{for(var y,g=geByClass("sq_edit_question_options_block",this.container)[Symbol.iterator]();!(_=(y=g.next()).done);_=!0){var w=y.value;this.updateContainerOptionsTextLengths(w)}}catch(u){v=!0,m=u}finally{try{!_&&g["return"]&&g["return"]()}finally{if(v)throw m}}},t.prototype.getTextSize=function(t){var e=val(t).length,n=void 0;return n=20>e?20:25>e?16:14},t.prototype.updateOptionTextLength=function(t){var e=gpeByClass("sq_edit_question_options_block",t);this.updateContainerOptionsTextLengths(e)},t.prototype.updateQuestionTextLength=function(t){var e=se('<textarea class="sq_edit_question_question sq_edit_question_question_preview">'+t.value+"</textarea>");this.container.append(e);var n=e.scrollHeight;re(e),setStyle(t,{height:Math.max(120,n)}),toggleClass(t,"sq_edit_question_question_warning",n>120)},t.prototype.updateContainerOptionsTextLengths=function(t){var e=geByClass("sq_edit_question_option",t),n=20,r=!0,o=!1,s=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var a=i.value,c=this.getTextSize(a);n=Math.min(n,c),toggleClass(a,"sq_edit_question_option_warning",20>c)}}catch(f){o=!0,s=f}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw s}}var l=!0,h=!1,d=void 0;try{for(var p,_=e[Symbol.iterator]();!(l=(p=_.next()).done);l=!0){var v=p.value;setStyle(v,{fontSize:n+"px"})}}catch(f){h=!0,d=f}finally{try{!l&&_["return"]&&_["return"]()}finally{if(h)throw d}}},t.prototype.request=function(t,e,n){e=extend({hash:this.options.hashes[t]},e||{}),n=extend({},{onFail:function(t){return showFastBox(getLang("global_error"),t||getLang("global_error_occured")),!0}},n||{}),ajax.post("/cleveradmin?act=a_"+t,e,n)},t.prototype.saveQuestions=function(){var t={},e=!0,n=!1,r=void 0;try{for(var o,s=this.options.questions_ids[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var i=o.value,u=-1;ge("option_correct_"+i+"_0").checked?u=0:ge("option_correct_"+i+"_1").checked?u=1:ge("option_correct_"+i+"_2").checked&&(u=2),t[i]={text:val("question_"+i),option0:val("option_"+i+"_0"),option1:val("option_"+i+"_1"),option2:val("option_"+i+"_2"),correct:u}}}catch(a){n=!0,r=a}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw r}}this.request("save_questions",{questions:JSON.stringify(t)},{showProgress:lockButton.bind(this,this.elements.saveQuestionsButton),hideProgress:unlockButton.bind(this,this.elements.saveQuestionsButton),onDone:function(){var t=showFastBox("Успешно","Вопросы сохранены. Теперь пролистай страницу и убедись, что нет ошибок.","Хорошо",function(){t.showProgress(),nav.reload()})}})},t}(),window.StreamQuizAdminHostScreen=function(){function t(e,n){var s=this;r(this,t),this.options=n||{},this.container=e,this.elements={watchersCount:geByClass1("sq_host_screen_viewers_count",e),notification:geByClass1("sq_host_screen_notification",e),notificationText:geByClass1("sq_host_screen_notification_text",e),lastNotificationText:geByClass1("sq_host_screen_last_notification",e),comments:geByClass1("sq_host_screen_comments",e),answers:geByClass1("sq_host_screen_answers",e),answersCountdown:geByClass1("sq_host_screen_answers_countdown",e),question:geByClass1("sq_host_screen_question",e),status:geByClass1("sq_host_screen_status",e),winners:geByClass1("sq_host_screen_winners",e),winnersPrize:geByClass1("sq_host_screen_winners_prize",e),winnersCount:geByClass1("sq_host_screen_winners_count",e),winnersList:geByClass1("sq_host_screen_winners_list",e),gameStatus:geByClass1("sq_host_screen_status",e)},this.bindEvents(),this.state=n.state,this.showMiniVideo=!1,n.queue_params&&Object(o.createWorker)(n.queue_params,function(t){switch(t[1]){case"new_reply_chat":s.addComment(t)}},function(){return s.updateQueueParams().then(function(t){var e=i(t,1),n=e[0];return n})}),this.updateScreen(),setInterval(this.updateState.bind(this),1e3)}return t.prototype.updateQueueParams=function(){return Object(s.post)("/cleveradmin",{act:"a_get_queue_params",hash:this.options.hashes.get_queue_params})},t.prototype.addComment=function(t){var e=se('<div class="sq_host_screen_comment"><div class="sq_host_screen_comment_author">'+t[5]+'</div><div class="sq_host_screen_comment_body">'+t[9]+"</div></div>");for(this.elements.comments.insertBefore(e,this.elements.comments.firstChild);this.elements.comments.children.length>20;)this.elements.comments.removeChild(this.elements.comments.lastChild)},t.prototype.bindEvents=function(){var t=this;addEvent(document,"keydown",this.onKeyDown.bind(this)),addEvent(this.elements.gameStatus,"click",function(){t.showMiniVideo=!t.showMiniVideo,!t.showMiniVideo&&videoview&&videoview.hide(!0,!0)})},t.prototype.startAnswersCountdownTick=function(){return this.answersCountdownLeft--,toggle(this.elements.answersCountdown,this.answersCountdownLeft>0),this.answersCountdownLeft<=0?(this.answersCountdownLeftTimer&&(clearInterval(this.answersCountdownLeftTimer),this.answersCountdownLeftTimer=null),void this.showNotification("say_answer")):void(this.elements.answersCountdown.innerHTML="Вопрос.."+this.answersCountdownLeft)},t.prototype.startAnswersCountdown=function(){this.answersCountdownLeftTimer||(this.answersCountdownLeft=11,this.answersCountdownLeftTimer=setInterval(this.startAnswersCountdownTick.bind(this),1e3),this.startAnswersCountdownTick())},t.prototype.onKeyDown=function(t){switch(t.which){case 32:this.startAnswersCountdown();break;default:return!0}return!1},t.prototype.showNotification=function(t){var e=this,n=void 0,r="";switch(t){case"say_answer":n="Ответ";break;default:return}r="sq_host_screen_last_notification_"+t,addClass(this.elements.lastNotificationText,r),this.elements.lastNotificationText.innerHTML=n,this.elements.notificationText.innerHTML=n,show(this.elements.notification),show(this.elements.lastNotificationText),setTimeout(function(){hide(e.elements.notification)},3e3),setTimeout(function(){hide(e.elements.lastNotificationText),removeClass(e.elements.lastNotificationText,r)},1e4)},t.prototype.request=function(t,e,n){e=extend({hash:this.options.hashes[t]},e||{}),n=extend({},{onFail:function(t){return topError(t||getLang("global_error_occured")),!0}},n||{}),ajax.post("/cleveradmin?act=a_"+t,e,n)},t.prototype.updateState=function(){var t=this;this.request("get_current_state",{need_winners:this.have_winners?0:1},{onDone:function(e){t.state=e,t.updateScreen()}})},t.prototype.updateScreen=function(){var t=this;if(this.state&&this.state.game){var e=this.state.game;if(toggle(this.elements.watchersCount,e.started),toggle(this.elements.answers,e.started&&this.state.current_question&&!this.have_winners&&!e.winners_count),toggle(this.elements.winners,!!this.have_winners||!!e.winners_count),toggleClass(this.elements.status,"sq_host_screen_status_started",e.started),toggleClass(this.elements.status,"sq_host_screen_status_stopped",!e.started),geByClass1("sq_host_screen_status_text",this.elements.status).innerHTML=e.started?"Эфир":"",e.started&&(this.elements.watchersCount.innerHTML=e.watchers),this.have_winners);else if(e.started&&e.winners_count){this.have_winners=!0,this.elements.winnersPrize.innerHTML="Выигрыш: "+e.winners_prize+"₽",this.elements.winnersCount.innerHTML="Победителей: "+e.winners_count,this.elements.winnersList.innerHTML="";var n=!0,r=!1,o=void 0;try{for(var s,i=e.winners[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var u=s.value;this.elements.winnersList.appendChild(se('<div class="sq_host_screen_winners_list_item" style="background-image:url('+u.photo+')">'+u.name+"</div>"))}}catch(a){r=!0,o=a}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw o}}var c=25*this.elements.winnersList.scrollHeight;animate(this.elements.winnersList,{scrollTop:this.elements.winnersList.scrollHeight-this.elements.winnersList.clientHeight},{duration:c,transition:Fx.Transitions.sineInOut}),setTimeout(function(){animate(t.elements.winnersList,{scrollTop:0},{duration:c,transition:Fx.Transitions.sineInOut})},c+1e3)}else if(e.started){videoview&&this.showMiniVideo&&showVideo(e.video,0,{autoplay:1,minimized:1});var f=this.state.current_question;if(f){this.elements.question.innerHTML=f.text;var l=f.answers.reduce(function(t,e){return t+e.users_answered},0),h=0,d=0,p=!0,_=!1,v=void 0;try{for(var m,y=f.answers[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var g=m.value,w=ge("sq_host_screen_answer_"+g.id);geByClass1("sq_host_screen_answer_text",w).innerHTML=g.text,geByClass1("sq_host_screen_answer_count",w).innerHTML=g.users_answered_formatted,toggleClass(w,"sq_host_screen_answer_correct",f.right_answer_id==g.id);var x=geByClass1("sq_host_screen_answer_progress",w),b=l?(g.users_answered/l*100).toFixed(0):0;setStyle(x,{width:b+"%"}),f.right_answer_id==g.id&&(h=b),d=Math.max(d,b)}}catch(a){_=!0,v=a}finally{try{!p&&y["return"]&&y["return"]()}finally{if(_)throw v}}toggleClass(this.elements.answers,"sq_host_screen_answers_hard",l>100&&d-h>25)}}}},t}();try{stManager.done(jsc("internal/stream_quiz.js"))}catch(u){}},666:function(t,e,n){var r=n(135)("keys"),o=n(26);t.exports=function(t){return r[t]||(r[t]=o(t))}},670:function(t,e){var n=t.exports={version:"2.2.1"};"number"==typeof __e&&(__e=n)},675:function(t,e,n){"use strict";var r=n(510)(!0);n(535)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},681:function(t,e,n){"use strict";function r(t,e){return new Promise(function(n){setTimeout(n.bind(null,e),1e3*t)})}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=0;return function s(){for(var i=arguments.length,u=Array(i),a=0;i>a;a++)u[a]=arguments[a];return Promise.resolve().then(function(){return t.apply(void 0,u)})["catch"](function(t){if(o++,e>=o){var i="function"==typeof n?n(o):0;return 0===i?s.apply(void 0,u):r(i).then(function(){return s.apply(void 0,u)})}throw t})}}function s(t,e,n){var r=void 0,o=void 0;return function(){for(var s=arguments.length,i=Array(s),u=0;s>u;u++)i[u]=arguments[u];return new Promise(function(t,s){var u=function(){r=null,o=null,n||t(i)},a=n&&!r;clearTimeout(r),
o&&o.reject("debounce"),r=setTimeout(u,e),a?t(i):n&&s("debounce"),o={resolve:t,reject:s}}).then(function(e){return t.apply(void 0,e)})}}function i(t,e){var n=void 0,r=new Promise(function(r){n=r,setTimeout(r.bind(null,e),1e3*t)});return{pause:function(){return r},abort:function(){n(e)}}}n.r(e),n.d(e,"pause",function(){return r}),n.d(e,"retryFn",function(){return o}),n.d(e,"debouncedPromise",function(){return s}),n.d(e,"abortablePause",function(){return i})},696:function(t,e,n){"use strict";var r=n(315),o=n(276),s=n(396),i=n(595);t.exports=n(535)(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},700:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},702:function(t,e,n){var r=n(106),o=n(640);t.exports=Object.keys||function(t){return r(t,o)}},78:function(t,e,n){var r=n(426),o=n(670),s=n(434),i=n(530),u=n(86),a="prototype",c=function(t,e,n){var f,l,h,d,p=t&c.F,_=t&c.G,v=t&c.S,m=t&c.P,y=t&c.B,g=_?r:v?r[e]||(r[e]={}):(r[e]||{})[a],w=_?o:o[e]||(o[e]={}),x=w[a]||(w[a]={});_&&(n=e);for(f in n)l=!p&&g&&void 0!==g[f],h=(l?g:n)[f],d=y&&l?u(h,r):m&&"function"==typeof h?u(Function.call,h):h,g&&i(g,f,h,t&c.U),w[f]!=h&&s(w,f,d),m&&x[f]!=h&&(x[f]=h)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},80:function(t,e,n){"use strict";var r=n(426),o=n(78),s=n(530),i=n(512),u=n(569),a=n(145),c=n(392),f=n(271),l=n(236),h=n(417),d=n(644),p=n(102);t.exports=function(t,e,n,_,v,m){var y=r[t],g=y,w=v?"set":"add",x=g&&g.prototype,b={},q=function(t){var e=x[t];s(x,t,"delete"==t?function(t){return m&&!f(t)?!1:e.call(this,0===t?0:t)}:"has"==t?function(t){return m&&!f(t)?!1:e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!f(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof g&&(m||x.forEach&&!l(function(){(new g).entries().next()}))){var B=new g,C=B[w](m?{}:-0,1)!=B,T=l(function(){B.has(1)}),L=h(function(t){new g(t)}),S=!m&&l(function(){for(var t=new g,e=5;e--;)t[w](e,e);return!t.has(-0)});L||(g=e(function(e,n){c(e,g,t);var r=p(new y,e,g);return void 0!=n&&a(n,v,r[w],r),r}),g.prototype=x,x.constructor=g),(T||S)&&(q("delete"),q("has"),v&&q("get")),(S||C)&&q(w),m&&x.clear&&delete x.clear}else g=_.getConstructor(e,t,v,w),i(g.prototype,n),u.NEED=!0;return d(g,t),b[t]=g,o(o.G+o.W+o.F*(g!=y),b),m||_.setStrong(g,t,v),g}},81:function(t,e,n){var r=n(135)("wks"),o=n(26),s=n(426).Symbol,i="function"==typeof s;t.exports=function(t){return r[t]||(r[t]=i&&s[t]||(i?s:o)("Symbol."+t))}},85:function(t,e){e.f={}.propertyIsEnumerable},86:function(t,e,n){var r=n(165);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}}});