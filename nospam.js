!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=172)}({121:function(e,t,n){"use strict";function a(){var e=val(p);try{e=JSON.stringify(JSON.parse(e))}catch(t){return void topError(getLang("nospam_types_engine_save_error"))}var n=0,a={};return each(e.match(/.{1,20000}/g),function(e,t){a["ConfigChunk"+e]=t,n++}),a.chunks_count=n,a}function o(){var e={act:"a_types_description_save"};extend(e,a());var t=geByClass1(d);Object(s.lockButton)(t),ajax.post("noSpam.php",e,{onDone:function(e){unlockButton(t),showDoneBox(getLang("nospam_types_engine_saved"))},onFail:function(){unlockButton(t),topError(getLang("nospam_types_engine_save_error"))}})}function r(){var e={act:"a_types_description_preview"};extend(e,a()),showBox("noSpam.php",e,{dark:1,containerClass:"nospam_hint_wrap"})}function i(){var e=cur.typesDescription;val(p,JSON.stringify(e,!1,2));var t=geByClass1(l),n=Object(c.createModule)({handlers:function(e,n){n(t,"click",d,o),n(t,"click",u,r)}});cur.destroy.push(function(){Object(c.destroyModule)(n)})}n.r(t),n.d(t,"init",function(){return i});var s=n(302),c=n(39),l="nospam_types_description_actions",d="nospam_types_description_save",u="nospam_types_description_preview",p="nospam_types_description_text"},142:function(e,t,n){"use strict";function a(e){var t=e.conditions;t&&(ls.set(H(""),t),addClass(geByClass("conditions_clear_button")[0],de));var n=e.conditions2;n&&(ls.set(H("2"),n),addClass(geByClass("conditions_clear_button")[1],de))}function o(){return hasClass(V.consoleWrap,q)}function r(){o()||addClass(V.consoleWrap,q),removeClass(V.consoleWrap,ne)}function i(){var e=geByClass1(X,V.patternWrap),t=geByClass1(Q,V.patternWrap);o()&&removeClass(V.consoleWrap,q),unlockButton(e),unlockButton(t)}function s(e){i(),geByClass1(G,V.consoleWrap).innerHTML=e;var t=geByClass1("_console_numfield_ip1024",V.consoleWrap),n=[[256,"/24 - 256"],[1024,"/22 - 1024"],[4096,"/20 - 4096"],[16384,"/18 - 16k"],[65536,"/16 - 65k"],[262144,"/14 - 262k"],[1048576,"/12 - 1kk"]];t&&new InlineDropdown(t,{items:n,selected:256,withArrow:!0,keepTitle:!0,autoShow:!0,autoHide:300,onSelect:function(e){return L("ip"+e)}})}function c(e,t){var n=geByClass1("_console_error",V.consoleWrap),a=geByClass("console_item");n.innerHTML="",e||(e="");var o=ce("div");e&&(o.innerHTML=e),t?o.className="error":o.className="info_msg";var r=e.match(/\/pattern[0-9]+/);r&&a&&a.forEach(function(e){e.className="console_item red_item"}),addClass(V.consoleWrap,ne),n.appendChild(o),i()}function l(e){R&&clearTimeout(R),R=setTimeout(function(){domData(V.consoleWrap,"failed",0)},3e3),domData(V.consoleWrap,"failed",1),console.error(e),c(e,!0)}function d(){var e=ge("queries",V.consoleWrap),t=geByClass1(te,V.consoleWrap);return t.innerHTML=isVisible(e)?"Показать запросы":"Скрыть запросы",toggle(e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,t=[],n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={},a=function(e){var t="conditions_input"===e.id?domPS(e):domNS(e);return hasClass(t,"option_cleared")},o=function(t){return e&&a(t)};n["type"+t]=cur["uiSpamtype"+t].val();var r=ge("pattern_input"+t);n["pattern"+t]=o(r)?p(r):r.value,n["threshold"+t]=ge("threshold_input"+t).value;var i=ge("uid_input"+t);n["uid"+t]=o(i)?p(i):i.value;var s=ge("ip_input"+t);n["ip"+t]=o(s)?p(s):s.value;var c=ge("uahash_input"+t);n["uahash"+t]=o(c)?p(c):c.value;var l=ge("time_start_input"+t);n["time_start"+t]=o(l)?p(l):l.value;var d=ge("time_finish_input"+t);n["time_finish"+t]=o(d)?p(d):d.value;var u=ge("conditions_input"+t);return n["conditions"+t]=o(u)?ls.get(H(t)):u.value,n},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];Array.from(geByClass("option_cleared",e)).forEach(function(e){var t=geByTag1("input",domPN(e))||geByTag1("textarea",domPN(e));n.push(t.id)});var a=[];return n.forEach(function(e){switch(e){case"pattern_input"+t:a|=cur.hideFieldsBitMasks.substring;break;case"ip_input"+t:a|=cur.hideFieldsBitMasks.ip;break;case"uahash_input"+t:a|=cur.hideFieldsBitMasks.uaHash;break;case"uid_input"+t:a|=cur.hideFieldsBitMasks.uid;break;case"time_finish_input"+t:a|=cur.hideFieldsBitMasks.timeFinish;break;case"time_start_input"+t:a|=cur.hideFieldsBitMasks.timeStart;break;case"conditions_input"+t:a|=cur.hideFieldsBitMasks.conditions}}),a};t.simplify=cur.uiSimplify.val(),t.duration=cur.uiDuration.val(),t.bantype=cur.uiBan.val(),t.search_period=cur.uiSearchPeriod.val();var o=cur.uiSearchPeriod.selectedItems();return o&&o.length>0&&(t.period_in_seconds=3===o[0].length&&1===o[0][2]?1:0),t.comment=ge("comment_input").value,t.all_actions=isChecked("all_actions")||!1,t.notbannedonly=isChecked("not_banned_only")||!1,t.linksonly=isChecked("links_only")||!1,t.wrap_actions=null===ge("wrap_actions")?1:isChecked("wrap_actions"),t.encode_entities=null===ge("encode_entities")?1:isChecked("encode_entities"),t.hidden_fields=a(geByClass1("pattern_part_root")),extend(t,n(e,"")),O()&&(t.hidden_fields2=a(geByClass1("pattern_part_child"),"2"),extend(t,n(e,"2"))),t}function p(e){return domData(e,"restore")}function _(e,t){return domData(e,"restore",t)}function m(){var e=ge("pattern_input"),t=geByClass1(Q,V.patternWrap),n=u();return e.value?void(isButtonLocked(t)||(r(),lockButton(t),n.act="a_console_find_actions",ajax.post("noSpam.php",n,{onDone:function(e){return s(e)},onFail:function(e){return l(e)}}))):(scrollToTop(0),void notaBene(e))}function f(e,t){"string"==typeof t&&(t=clean(t)),val(e,t),E(!1,ge(e),"reset")}function h(e){f("uid_input",e)}function g(e){f("ip_input",e)}function v(e){f("uahash_input",e)}function b(e){cur.uiSpamtype.selectItem(e)}function k(e,t){0!==e.length&&(ge("conditions_input").value+=ge("conditions_input").value?" "+(t?"||":"&&")+" "+e:e),P("reset")}function w(e){f("time_start_input",e)}function y(e){f("time_finish_input",e)}function C(e){f("threshold_input",e)}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;e||(e=u(!0));var t=Object.keys(e);t.sort();for(var n=[],a=0;a<t.length;a++){var o=t[a],r=e[o];n.push(encodeURIComponent(o)+"="+encodeURIComponent(r))}return"/noSpam?"+n.join("&")}function T(){var e=S(),t=function(e){removeClass(a,"progress"),showTooltip(a,{text:e,slide:15,center:1,black:1,nohide:1,hidedt:400,shift:[0,2,0],onShowEnd:function(){var e=window,t=e.selectText;t("shorten_link"),setTimeout(a.tthide,3e3)}})},n=function(e){removeClass(a,"progress"),topError(e,{dt:5})},a=geByClass1("_get_pattern_link");a&&a.tt&&a.tt.destroy(),addClass(a,"progress"),ajax.post("noSpam.php",{act:"get_search_link",link:e},{onDone:t,onFail:n})}function x(){var e=geByClass1($,V.patternWrap);if(!isButtonLocked(e)){var t=extend(u(),{act:"debug_pattern"});r(),ajax.post("noSpam.php",t,{onDone:function(e){return c(e)},onFail:function(e){return l(e)}})}}function L(e){var t=isChecked("values_hist"),n=u(),a=function(n,a){var o=showFastBox({width:t?330:710,title:e,dark:1,containerClass:"nospam_hist_wrap",hideButtons:t},n);o.evalBox(a)};n.need_hist=t,n.act="numeric_field",n.field=e,cur.numFieldSel=e,ajax.post("noSpam.php",n,{onDone:a,progress:"console_query_fields_progress"})}function B(e){var t=domData(e.target,"field"),n=showFastBox.pbind({width:710,title:t,dark:1}),a=u();a.act="link_field",a.field=t,ajax.post("noSpam.php",a,{onDone:n,progress:"console_query_fields_progress"})}function D(e){var t=2===e?cur.uiSpamtype2.val():cur.uiSpamtype.val();return showBox("noSpam.php",{act:"conditions_hint",spamtype:t},{dark:1,containerClass:"nospam_hint_wrap"})}function M(){var e=u(),t=geByClass1(X,V.patternWrap);e.act="apply_pattern",isButtonLocked(t)||1!==domData(V.consoleWrap,"failed")&&(r(),lockButton(t),ajax.post("noSpam.php",e,{onDone:function(e){return c(e)},onFail:function(e){return l(e)}}))}function j(e){var t=["pattern_input","threshold_input","ip_input","uahash_input","time_finish_input","time_start_input","conditions_input"];t.forEach(function(e){var t=ge(e).value;ge(e).value=ge(e+"2").value,ge(e+"2").value=t});var n=cur.uiSpamtype.val();cur.uiSpamtype.selectItem(cur.uiSpamtype2.val()),cur.uiSpamtype2.selectItem(n),toggleClass(e,"switched")}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"nospam_conditions"+e+"_"+vk.id}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=ge("conditions_input"+t),a="option_cleared",o=domPS(n),r=function(){var e=n.value;ls.set(H(t),e),n.value="",e&&addClass(o,a)},i=function(){var e=ls.get(H(t));removeClass(o,a),removeClass(o,de),e&&(ls.remove(H(t)),n.value=e)},s=function(){removeClass(o,a),removeClass(o,de),ls.remove(H(t))};switch(e){case"clear":hasClass(o,a)?i():r();break;case"reset":s()}}function E(e,t,n){function a(n){var a=val(n);switch(_(n,a),t){case"pattern_input":case"pattern_input2":val(n,"/"),cur.uiSimplify.selectItem(32);break;case"threshold_input":case"threshold_input2":val(n,n.value&&"2"===n.value?"1":"2");break;default:val(n,"")}a&&addClass(e,"option_cleared")}function o(){switch(t){case"threshold_input":case"threshold_input2":a(s);break;default:c&&(s.value=p(s))}removeClass(e,"option_cleared"),removeClass(e,de)}function r(){var e=geByClass1("option_clear",s.parentNode);_(s,""),removeClass(e,"option_cleared"),removeClass(e,de)}function i(){var e=geByClass("option_clear");e.forEach(function(e){var t=ge(e.getAttribute("data-option"));_(t,""),removeClass(e,"option_cleared"),removeClass(e,de)})}var s=ge(t),c=hasClass(e,"option_cleared");switch(n){case"clear":c?o(s):a(s);break;case"reset":r(s);break;case"reset_all":i(s)}}function O(){var e=geByClass1(ee);if(!isVisible(e))return!1;for(var t=geByClass("cloneable_input",e),n=0;n<t.length;n++)if(val(t[n]))return!0;return!1}function N(){var e=geByClass1("pattern_wrap"),t="pattern_composite";return hasClass(e,t)?void removeClass(e,t):void addClass(e,t)}function F(){}function I(e){var t=ge(document.activeElement);if(e.altKey)switch(-1!==[49,50,51,52,53,67,70,83].indexOf(e.keyCode)&&t?t.blur():"",e.keyCode){case 83:Object(V.activeTab)()===V.tabPattern?m():Object(V.activeTab)()===V.tabReports&&Object(U.prepareReport)(Object(U.activeReportsType)(),Object(U.activeSubReportsType)());break;case 70:if(-1!==[z,J,Y].indexOf(vk.id))return M();break;case 67:P("clear"),cur.conditions.deselectTemplate();break;case 49:cur.uiSearchPeriod.selectItem(1);break;case 50:cur.uiSearchPeriod.selectItem(24);break;case 51:cur.uiSearchPeriod.selectItem(72);break;case 52:cur.uiSearchPeriod.selectItem(240);break;case 53:cur.uiSearchPeriod.selectItem(2160)}}function W(){var e=window,t=e.pageNode,n=window,a=n.browser,o=a.msie6?t:window,r=geByClass1("_pattern_buttons",V.patternWrap),i=Object(A.createModule)({handlers:function(e,t){t(r,"click",Q,m),t(r,"click",X,M),t(r,"click",Z,T),t(r,"click",$,x),t(V.consoleWrap,"click",te,d),t(V.consoleWrap,"click",oe,function(e){return B(e)}),t(V.consoleWrap,"click",ae,function(e){return L(domData(e.target,"field"))}),t(V.consoleWrap,"click",re,function(e){var t=e.target,n=domData(t,"time");0>n?y(-n):n>0&&w(n)}),t(V.consoleWrap,"click",ie,function(e){if(e&&e.altKey){var t=clean(e.target.dataset.uid||"");e.ctrlKey?(removeClass(e.target,"console_intem_excluded"),h(t)):(addClass(e.target,"console_intem_excluded"),h(""),k("uid != "+t)),cancelEvent(e)}}),e(o,"scroll",F),e(document,"keydown",I),t(V.patternWrap,"click",se,function(e){var t=e.target;E(t,domData(t,"option"),"clear")}),t(V.patternWrap,"click",le,function(e){var t=domNS(e.target).id.replace("conditions_input","");P("clear",t)}),t(document,"click",ue,function(e){var t=e.target,n=domData(t,"conditions");k(n)})}});cur.destroy.push(function(){Object(A.destroyModule)(i)})}n.r(t),n.d(t,"ID_ASHVETS",function(){return z}),n.d(t,"ID_NSHKARUBA",function(){return J}),n.d(t,"ID_PKALAYDIN",function(){return K}),n.d(t,"init",function(){return a}),n.d(t,"getParams",function(){return u}),n.d(t,"setOption",function(){return f}),n.d(t,"setUid",function(){return h}),n.d(t,"setIp",function(){return g}),n.d(t,"setUaHash",function(){return v}),n.d(t,"setSpamtype",function(){return b}),n.d(t,"setConditions",function(){return k}),n.d(t,"setThreshold",function(){return C}),n.d(t,"composeSearchLinkFromParams",function(){return S}),n.d(t,"getNumericField",function(){return L}),n.d(t,"getConditionsHint",function(){return D}),n.d(t,"switchParams",function(){return j}),n.d(t,"conditionsClear",function(){return P}),n.d(t,"optionClear",function(){return E}),n.d(t,"addPatternPart",function(){return N}),n.d(t,"mount",function(){return W});var R,A=n(39),U=n(322),V=n(295),z=1576215,J=138305184,Y=163176673,K=143978,G="_console",q="console_locked",X="_apply_pattern",Q="_search_reports",Z="_get_pattern_link",$="debug_pattern",ee="_pattern_part_child",te="_queries_toggle",ne="console_show_message",ae="_console_numfield_action",oe="_console_linkfield_action",re="console_set_range",ie="console_uid",se="_option_clear",le="_conditions_clear",de="highlighted",ue="_console_conditions"},172:function(e,t,n){e.exports=n(706)},196:function(e,t,n){"use strict";function a(){return nav.strLoc}function o(e){var t={0:nav.objLoc[0],act:nav.objLoc.act};nav.setLoc(extend(t,e))}function r(e){return nav.objLoc[e]}function i(){return r("act")}function s(e){var t=window.open(e,"_blank");t.focus()}function c(){var e=new MessageBox;e.setOptions({title:!1,hideButtons:!0}).show(),hide(boxLayerBG),hide(e.bodyNode),show(boxLoader),boxRefreshCoords(boxLoader)}function l(){curBox&&curBox()&&curBox().hide()}function d(){curBox().hide()}function u(e,t,n){window.radioBtns[e]={val:n,els:Array.prototype.slice.apply(geByClass("radiobtn",geByClass1(t)))}}function p(e){return e.ctrlKey||e.metaKey&&browser.mac}n.r(t),n.d(t,"PHP_SECOND",function(){return _}),n.d(t,"PHP_MINUTE",function(){return m}),n.d(t,"PHP_HOUR",function(){return f}),n.d(t,"PHP_DAY",function(){return h}),n.d(t,"PHP_WEEK",function(){return g}),n.d(t,"PHP_MONTH",function(){return v}),n.d(t,"PHP_YEAR",function(){return b}),n.d(t,"MILLISECONDS_MULTIPLIER",function(){return k}),n.d(t,"SECOND",function(){return w}),n.d(t,"MINUTE",function(){return y}),n.d(t,"HOUR",function(){return C}),n.d(t,"DAY",function(){return S}),n.d(t,"WEEK",function(){return T}),n.d(t,"MONTH",function(){return x}),n.d(t,"YEAR",function(){return L}),n.d(t,"TARGET_BLANK",function(){return B}),n.d(t,"EVENT_MOUSEDOWN",function(){return D}),n.d(t,"EVENT_KEYDOWN",function(){return M}),n.d(t,"EVENT_SCROLL",function(){return j}),n.d(t,"EVENT_CLICK",function(){return H}),n.d(t,"getCurrentUrl",function(){return a}),n.d(t,"updateUrl",function(){return o}),n.d(t,"getUrlParam",function(){return r}),n.d(t,"getAct",function(){return i}),n.d(t,"openInNewTab",function(){return s}),n.d(t,"showLoading",function(){return c}),n.d(t,"hideLoading",function(){return l}),n.d(t,"hideCurrentBox",function(){return d}),n.d(t,"initRadioButtons",function(){return u}),n.d(t,"isSpecialKeyPressed",function(){return p});var _=1,m=60,f=3600,h=86400,g=604800,v=2592e3,b=31536e3,k=1e3,w=_*k,y=m*k,C=f*k,S=h*k,T=h*k,x=v*k,L=b*k,B="_blank",D="mousedown",M="keydown",j="scroll",H="click"},243:function(e,t,n){"use strict";function a(){r=(new Date).getTime()}function o(){var e=(new Date).getTime(),t=(e-r)/1e3,n=Array.prototype.slice.call(arguments);n.push(t),debugLog.apply(null,n)}n.r(t),n.d(t,"startDebugTimer",function(){return a}),n.d(t,"debugLogTimer",function(){return o});var r=void 0},295:function(e,t,n){"use strict";function a(e,t){var n=geByClass1("_nospam_tab_switch_"+e);uiTabs.switchTab(domFC(n)),t&&(n=domChildren(n));var a=geByClass("nospam_tab"),o=domData(n,"tab-id");return a.forEach(function(e){return domData(e,"id")==o?void show(e):void hide(e)}),Object(m.updateUrl)({tab:e}),e===C?_.noSpamPatterns.initUpdate():e===w?p.noSpamReports.initUpdate():e===y&&scrollToTop(),!1}function o(){return Object(m.getUrlParam)("tab")}function r(){var e=domPN(geByClass1("ui_tab_sel"));return domData(e,"tab-id")}function i(e){var t=domData(e,"option"),n=domData(e,"option-state"),a=1^n,o={act:"a_set_custom_option",name:t,state:a};ajax.post("noSpam.php",o,{onDone:s,showProgress:lockActionsMenuItem.pbind(e),hideProgress:unlockActionsMenuItem.pbind(e)})}function s(e){var t=geByClass(S,k);t.forEach(function(t){var n=domData(t,"option"),a=+e[n],o=window.cur.lang["nospam_options_"+n];o&&(t.innerHTML=o[a]),domData(t,"option-state",a)}),cur.options.custom_options=e}function c(e){var t=window,n=t.cur;return n.options.custom_options?n.options.custom_options[e]:!1}function l(e){var t=30;extend(cur,{uiSpamtype:new Dropdown(ge("spamtype"),e.spamtypes,extend(T,{selectedItems:cur.options.spamtype})),uiSpamtype2:new Dropdown(ge("spamtype2"),e.spamtypes,extend(T,{selectedItems:cur.options.spamtype2})),uiSimplify:new Dropdown(ge("simplify_select"),e.simplifies,extend(T,{selectedItems:cur.options.simplify})),uiBan:new Dropdown(ge("ban_select"),e.bans,extend(T,{selectedItems:cur.options.ban})),uiDuration:new Dropdown(ge("duration_select"),e.durations,extend(T,{selectedItems:cur.options.duration})),uiSearchPeriod:new Dropdown(ge("search_period_select"),e.searchperiods,extend(T,{selectedItems:cur.options.searchperiod}))}),placeholderSetup("comment_input"),val("comment_input")&&autosizeSetup("comment_input",{minHeight:t}),geByClass("conditions_input").forEach(function(e){placeholderSetup("comment_input"),val(e)&&autosizeSetup("comment_input",{minHeight:t})});var n=ge("page_body");g=geByClass1("pattern_wrap",n),h=geByClass1("console_wrap",n),b=geByClass1("reports_tabs",n),v=geByClass1("_reports_list",n),k=geByClass1("_nospam_options",n);var a=geByClass1("nospam_patterns_wrap",n),o=Object(f.createModule)({handlers:function(e,t){t(a,"click","_abort_pattern_mild",function(e){return Object(_.abortPatternMild)(domData(e.target,"id"))}),t(k,"click",S,function(e){return i(e.target)})}});cur.destroy.push(function(){Object(f.destroyModule)(o)}),Object(u.mount)(),Object(p.mount)()}function d(e){var t=Object(f.createMutations)(l),n=(t.callMutations,t.bindMutations);n(e)}n.r(t),n.d(t,"consoleWrap",function(){return h}),n.d(t,"patternWrap",function(){return g}),n.d(t,"reportList",function(){return v}),n.d(t,"reportTabs",function(){return b}),n.d(t,"tabReports",function(){return w}),n.d(t,"tabPattern",function(){return y}),n.d(t,"tabPatterns",function(){return C}),n.d(t,"switchTab",function(){return a}),n.d(t,"getCurrentTab",function(){return o}),n.d(t,"activeTab",function(){return r}),n.d(t,"getCustomOption",function(){return c}),n.d(t,"init",function(){return d});var u=n(142),p=n(322),_=n(300),m=n(196),f=n(39),h=void 0,g=void 0,v=void 0,b=void 0,k=void 0,w="reports",y="pattern",C="patterns",S="_nospam_option_action",T={width:185,height:500,multiselect:!1}},298:function(e,t,n){"use strict";function a(e){var t=s.get(e.currentTarget);if(t){var n=t[e.type];if(n)for(var a=void 0,o=0;o<n.length;o++){var r=i(n[o],2),c=r[0],l=r[1],d=void 0;if(hasClass(e.target,c)?d=l(e,e.target):(a=gpeByClass(c,e.target,e.currentTarget))&&(d=l(e,a)),d===!1)break}}}function o(e,t,n,o){var r=s.get(e);r||(s.set(e,{}),r=s.get(e));for(var i=t.split(" "),c=0;c<i.length;c++){var l=i[c];r[l]||(r[l]=[],addEvent(e,l,a)),r[l].push([n,o])}}function r(e,t,n,o){var r=s.get(e);if(r){t.split(" ").forEach(function(t){r[t]&&(r[t]=r[t].filter(function(e){return e[0]!==n||e[1]!==o}),0===r[t].length&&removeEvent(e,t,a))});var i=Object.keys(r).map(function(e){return r[e].length}).reduce(function(e,t){return e+t});0===i&&s["delete"](e)}}n.r(t),n.d(t,"addDelegateEvent",function(){return o}),n.d(t,"removeDelegateEvent",function(){return r});var i=function(){function e(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(c){o=!0,r=c}finally{try{!a&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=new window.Map},300:function(e,t,n){"use strict";function a(){var e=function(e){var t=ge("in_process");return t?e>0?animateCount(t,e):t.innerHTML=e:void 0},t=function(e){ge("in_process").innerHTML=e||"Неизвестная ошибка (banProcess)"};ajax.post("noSpam.php",{act:"a_in_process"},{onDone:e,onFail:t})}function o(){var e=function(e){var t=geByClass1("in_process_wrap");if(t){show(t);var n=e.table;delete e.table,l=e,ge("patterns").innerHTML=n}},t=function(e){var t=geByClass1("in_process_wrap");return t?t.innerHTML=e||"Неизвестная ошибка (pProcess)":void 0};ajax.post("noSpam.php",{act:"a_last_patterns"},{onDone:e,onFail:t})}function r(e){var t=function(){ge("abort_pattern_mild"+e).innerHTML="<span style = 'color: green'>остановлен</span>"},n=function(){ge("abort_pattern_mild"+e).innerHTML="<span style = 'color: red'>ошибка</span>"};ajax.post("noSpam.php",{act:"a_abort_pattern_mild",pid:e},{onDone:t,onFail:n})}n.r(t),n.d(t,"abortPatternMild",function(){return r}),n.d(t,"noSpamPatterns",function(){return _});var i=n(295),s=5e3,c=1e4,l={},d=void 0,u=void 0,p=void 0,_={patternTooltip:function(e,t){var n={content:l[t]?l[t].tooltip:"",className:"pattern_tt_wrap",nohideover:0,showsp:150,slide:15,hasover:0,shift:[5,0,0]};return showTooltip(e,n)},updateProcess:function(e){var t=vkNow();"patterns"===Object(i.activeTab)()&&-1!=window._wf&&((t-u>s||e)&&(a(),u=t),(t-d>c||e)&&(o(),d=t))},clearTimer:function(){clearInterval(p)},initUpdate:function(){this.updateProcess(!0),p||(p=setInterval(this.updateProcess,1e3),cur.destroy.push(this.clearTimer))}}},302:function(e,t,n){"use strict";function a(e,t,n){if(e=ge(e)){n||elfocus(e),void 0===data(e,"backstyle")&&data(e,"backstyle",e.style.backgroundColor||"");var a=data(e,"back")||data(e,"back",getStyle(e,"backgroundColor")),o={notice:"#FFFFE0",warning:"#FAEAEA"};setStyle(e,"backgroundColor",o[t]||t||o.warning),setTimeout(animate.pbind(e,{backgroundColor:a},300,function(){e.style.backgroundColor=data(e,"backstyle")}),400)}}function o(e){if(window.scrollNode&&!browser.mobile&&window._tbLink){var t=ge("page_body"),n=getXY(t),a=scrollGetY(),o=bodyNode.scrollLeft,r=ge("side_bar"),i=isVisible(r);if(window._stlSideTop=Math.max((i?getSize(r)[1]:0)-a-(browser.mozilla?getXY(pageNode)[1]:0),n[1]),e||o!=__scrLeft){var s=ge("page_layout"),c=vk.rtl?s.offsetLeft+s.offsetWidth:0,l=vk.rtl?(window.lastWindowWidth||0)-c:s.offsetLeft;setStyle(_stlLeft,{width:Math.max(l-1,0)});var d=vk.rtl?n[0]+t.offsetWidth+5:l,u=vk.rtl?c-d:n[0]-5-d;setStyle(_stlSide,{left:d-o,width:Math.max(u,0)}),__scrLeft=o}setStyle(_stlSide,{top:_stlSideTop,height:Math.max((window.lastWindowHeight||0)-_stlSideTop,0)}),__adsUpdate();var p=200,_=_tbLink.loc||_stlWas||a>p,m=0,f=!1,h=a>250&&cur._regBar;if(_){1!==_stlShown&&(show(_stlLeft,_stlSide),addClass(_stlLeft,"stl_active"),addClass(_stlSide,"stl_active"),_stlShown=1),_tbLink.loc&&cur._noUpLink&&(a=0),_stlWas&&a>500&&(_stlWas=0),a>p?(m=(a-p)/p,(_stlWasSet||_stlBack)&&(_stlWasSet=_stlBack=0,f=1,val(_stlText,getLang("global_to_top")),removeClass(_stlText,"down"),removeClass(_stlText,"back"))):(m=(p-a)/p,_stlWas?_stlWasSet||(_stlWasSet=1,f=0,val(_stlText,""),addClass(_stlText,"down"),_stlBack&&(_stlBack=0,removeClass(_stlText,"back"))):_tbLink.loc&&(_stlBack||(_stlBack=1,f=_tbLink.fast?1:0,val(_stlText,getLang("global_back")),addClass(_stlText,"back"),_stlWasSet&&(_stlWasSet=0,removeClass(_stlText,"down"))))),f!==!1&&toggleClass(_stlLeft,"over_fast",hasClass(_stlLeft,"over")&&f);var g={opacity:Math.min(Math.max(m,0),1)};vk.staticheader&&(g.top=-Math.min(getSize("page_header_cont")[1],a)),setStyle(_stlLeft,g)}else 0!==_stlShown&&(hide(_stlLeft,_stlSide),_stlShown=0);vk.id||(!_regBar&&h?(_regBar=1,val(ge("reg_bar_content"),cur._regBar),animate(ge("reg_bar"),{top:0,transition:Fx.Transitions.sineInOut},400),animate(ge("stl_bg"),{paddingTop:60,transition:Fx.Transitions.sineInOut},400)):_regBar&&!h&&(_regBar=0,animate(ge("reg_bar"),{top:-56,transition:Fx.Transitions.sineInOut},400),animate(ge("stl_bg"),{paddingTop:13,transition:Fx.Transitions.sineInOut},400)))}}function r(e,t){if(e=ge(e),e&&!e.btnevents){if(hasClass(e,"flat_button"))return void(isFunction(t)&&(e.onclick=t.pbind(e)));var n=e.parentNode;if(hasClass(n,"button_blue")||hasClass(n,"button_gray"))return void(isFunction(t)&&(e.onclick=t.pbind(e)));var a=!1;addEvent(e,"click mousedown mouseover mouseout",function(o){if(!hasClass(n,"locked"))switch(o.type){case"click":if(!a)return;return e.className="button_hover",t(e),cancelEvent(o);case"mousedown":e.className="button_down";break;case"mouseover":a=!0,e.className="button_hover";break;case"mouseout":e.className="button",a=!1}}),e.btnevents=!0}}function i(e){return(e=ge(e))?hasClass(e,"ui_actions_menu_item_lock"):void 0}function s(e){if((e=ge(e))&&hasClass(e,"ui_actions_menu_item")&&!hasClass(e,"ui_actions_menu_item_lock")){data(e,"inner",e.innerHTML),addClass(e,"ui_actions_menu_item_lock");var t=ce("div",{className:"ui_actions_menu_item_lock_text"});val(t,e.innerHTML),e.appendChild(t),showProgress(e)}}function c(e){(e=ge(e))&&hasClass(e,"ui_actions_menu_item")&&hasClass(e,"ui_actions_menu_item_lock")&&(removeClass(e,"ui_actions_menu_item_lock"),e.innerHTML=data(e,"inner"))}function l(e){return(e=ge(e))?hasClass(e,"link_lock"):void 0}function d(e,t){(e=ge(e))&&"a"==e.tagName.toLowerCase()&&!l(e)&&(addClass(e,"link_lock"),t&&each(t,function(t,n){addClass(e,n)}))}function u(e,t){(e=ge(e))&&l(e)&&(removeClass(e,"link_lock"),t&&each(t,function(t,n){removeClass(e,n)}))}function p(e){if((e=ge(e))&&("button"==e.tagName.toLowerCase()||hasClass(e,"flat_button")||hasClass(e,"wr_header"))&&!f(e)){var t=getSize(e);addClass(e,"flat_btn_lock"),data(e,"inner",e.innerHTML),setStyle(e,{width:t[0],height:t[1]}),e.innerHTML="",showProgress(e,"btn_lock")}}function _(e){(e=ge(e))&&f(e)&&(hideProgress(e),e.innerHTML=data(e,"inner"),removeClass(e,"flat_btn_lock"),setStyle(e,{width:null,height:null}))}function m(e){return f(e)}function f(e){return(e=ge(e))?hasClass(e,"flat_btn_lock"):void 0}function h(e,t){if((e=ge(e))&&"button"===e.tagName.toLowerCase())if(t){if(!isVisible(e))return;e.parentNode.insertBefore(ce("button",{innerHTML:e.innerHTML,className:e.className+" button_disabled"}),e),hide(e)}else{var n=domPS(e);n&&hasClass(n,"button_disabled")&&re(n),show(e)}}function g(e){if(void 0===window._sbWidth||e){var t=ce("div",{innerHTML:'<div style="height: 75px;">1<br>1</div>'},{overflowY:"scroll",position:"absolute",width:"50px",height:"50px"});bodyNode.appendChild(t),window._sbWidth=Math.max(0,t.offsetWidth-t.firstChild.offsetWidth-1),bodyNode.removeChild(t)}return window._sbWidth}function v(e){return e=ge(e),hasClass(e,"on")?1:""}function b(e,t){return e=ge(e),e&&!hasClass(e,"disabled")?(void 0===t&&(t=!v(e)),toggleClass(e,"on",t),e.setAttribute("aria-checked",t?"true":"false"),!1):void 0}function k(e,t){return e=ge(e),void 0===t&&(t=!hasClass(e,"disabled")),toggleClass(e,"disabled",t),"INPUT"==e.tagName&&(t?e.setAttribute("readonly","readonly"):e.removeAttribute("readonly")),!1}function w(e){return radioBtns[e]?radioBtns[e].val:!1}function y(e,t,n){return radioBtns[n]&&!hasClass(e,"disabled")?(each(radioBtns[n].els,function(){this==e?(addClass(this,"on"),this.setAttribute("aria-checked","true"),this.setAttribute("tabindex","0")):(removeClass(this,"on"),this.setAttribute&&(this.setAttribute("aria-checked","false"),this.setAttribute("tabindex","-1")))}),radioBtns[n].val=t):void 0}n.r(t),n.d(t,"notaBene",function(){return a}),n.d(t,"updSideTopLink",function(){return o}),n.d(t,"createButton",function(){return r}),n.d(t,"actionsMenuItemLocked",function(){return i}),n.d(t,"lockActionsMenuItem",function(){return s}),n.d(t,"unlockActionsMenuItem",function(){return c}),n.d(t,"linkLocked",function(){return l}),n.d(t,"lockLink",function(){return d}),n.d(t,"unlockLink",function(){return u}),n.d(t,"lockButton",function(){return p}),n.d(t,"unlockButton",function(){return _}),n.d(t,"buttonLocked",function(){return m}),n.d(t,"isButtonLocked",function(){return f}),n.d(t,"disableButton",function(){return h}),n.d(t,"sbWidth",function(){return g}),n.d(t,"isChecked",function(){return v}),n.d(t,"checkbox",function(){return b}),n.d(t,"disable",function(){return k}),n.d(t,"radioval",function(){return w}),n.d(t,"radiobtn",function(){return y}),window.__scrLeft=0,window.radioBtns={},window.notaBene=a,window.updSideTopLink=o,window.createButton=r,window.actionsMenuItemLocked=i,window.lockActionsMenuItem=s,window.unlockActionsMenuItem=c,window.linkLocked=l,window.lockLink=d,window.unlockLink=u,window.lockButton=p,window.unlockButton=_,window.buttonLocked=m,window.isButtonLocked=f,window.disableButton=h,window.sbWidth=g,window.isChecked=v,window.checkbox=b,window.disable=k,window.radioval=w,window.radiobtn=y},322:function(e,t,n){"use strict";function a(){var e=geByClass1(P,T.reportTabs);return domData(e,"type")}function o(){var e=geByClass1("_reports_subtabs",T.reportTabs),t=geByClass1(P,e);return domData(t,"subtype")}function r(e,t){function n(){if("mail"!==e&&"mail_group"!==t)return void console.log("Unsupported filters used");var n=geByClass1("filters");return{hide_groups_with_disabled_messages:isChecked(geByClass1("hide_groups_with_disabled_messages_filter",n)),shift:isObject(cur.hoursShiftSlider)?23*cur.hoursShiftSlider._currValue:0,min_reporters_amount:val(geByClass1("min_reports_amount_filter",n)),sorting:radioval("group_messages_reports_sorting")}}function a(t){if(Object(x.debugLogTimer)("actions fetch"),I={},0===t.length)return void(i.innerHTML=getTemplate("nospam_reports_type_search_empty"));for(var n=0;n<t.length;n++){var a=t[n];a.ui_type=e;var o=s(a.ui_type,n);b(a.ua_hash,a.agent_name),delete a.agent_name,delete a.remix_seed,a.index=n,I[o]=a}i.innerHTML="",c(e,0),t=""}function o(e){Object(x.debugLogTimer)("actions fetched fail"),topError(e),i.innerHTML=getTemplate("nospam_reports_type_search_error")}Object(x.startDebugTimer)();var r=geByClass1("_report_btn_update",T.reportList);if(!isButtonLocked(r)){var i=geByClass1("_reports_"+e+"_wrap",T.reportList);if(!i)return void topError("Can't find wrap for type: "+e);var l={act:"a_get_reports",encode_entities:1,type:e,sub_type:t,shift:cur.options.shift};"mail"===e&&"mail_group"===t&&(l=extend(l,n())),ajax.post("noSpam.php",l,{onDone:a,onFail:o,showProgress:lockButton.pbind(r),hideProgress:unlockButton.pbind(r)}),scrollToTop()}}function i(e){var t=e.target,n=domData(t,"type"),a=domData(t,"subtype"),o=geByClass("report_filter",T.reportTabs),i=geByClass("report_subfilter",T.reportTabs),s=geByClass1(E,T.reportList);if(!n)return!1;o.forEach(function(e){hasClass(e,P)&&removeClass(e,P),domData(e,"type")!==n||domData(e,"subtype")||addClass(e,P)});var c=!1,l=!1;i.forEach(function(e){removeClass(e,H),removeClass(e,P),domData(e,"type")===n&&(addClass(e,H),c=!0),domData(e,"subtype")===a&&(addClass(e,P),l=!0)});var d=geByClass1("hr",T.reportTabs);if(c?show(d):hide(d),c&&!l){var u=geByClass1(H,T.reportTabs);addClass(u,P)}var p=domData(s,"type");p!==n&&(removeClass(s,E),addClass(ge("reports_"+n),E)),r(n,a)}function s(e,t){return"report_"+e+"_"+t}function c(e,t,n){Object(x.startDebugTimer)(),n||(n=j);for(var a=geByClass1("_reports_"+e+"_wrap",T.reportList),o=domPN(a),r=geByClass1("_reports_type_show_more",o),i=0,c=0,l=0;n>i;){c=l,l++;var _=s(e,c),m=I[_];if(!(t>c)){if("object"!==("undefined"==typeof m?"undefined":M(m))){debugLog("empty reports after "+c,"need to shift "+t);break}if(m.uid&&m.showed!==!0){var f=ce("div",{id:"report_"+e+"_"+c});if(addClass(f,"clear_fix"),addClass(f,"report"),m.mem_banned||m.uid_base_info){if(Object(T.getCustomOption)("hide_banned"))continue;
addClass(f,"banned")}m.ui_type=e;var h=u(m),g=void 0,v=d(m),b=D(v,1);g=b[0];var k=p(m,c);[h,g,k].forEach(function(e){f.appendChild(e)}),a.appendChild(f),i++}}}if(0===i)return void hide(r);r?isVisible(r)||show(r):(r=ce("div",{className:"reports_type_show_more _reports_type_show_more"}),o.appendChild(r));var w=parseInt(t)+j;r.innerHTML=getTemplate("nospam_reports_show_more",{need_shift:w}),Object(x.debugLogTimer)("actions to html")}function l(){var e=getSelectionText();e?cur.uiSimplify.selectItem("0"):(e="/",cur.uiSimplify.selectItem("32")),val("pattern_input",e)}function d(e){var t,n="",a=e.type_name,o=parseInt(e.type),r=ce("div");switch(addClass(r,"report_body"),e.api_id>0&&(setStyle(r,"color","#bbbbbb"),n+=e.api_id>0?'<div class="report_api">Приложение ('+e.api_id+"):</div>":""),e.message&&(n+=getTemplate("nospam_reports_field",{"class":"report_message",value:e.message})),e.kludges&&(n+=getTemplate("nospam_reports_field",{"class":"reports_kludges",value:e.kludges})),e.attaches&&(n+=getTemplate("nospam_reports_attaches",{attaches:e.attaches})),o){case 500:case 510:case 545:t="<a href='/wall"+e.owner_id+"_"+e.msg_id+"' target='_blank'> "+a+"</a>";break;case 501:case 550:t="<a href='/wall"+e.owner_id+"_"+e.parent_id+"?reply="+e.msg_id+"' target='_blank'> "+a+"</a>",e.group_id&&e.group_link&&(n+=getTemplate("nospam_reports_group_id",{group_id:e.group_id,group_link:e.group_link}));break;case F:n+=e.score?"<b>phone_cheat:</b> "+e.score:"",e.update_time&&(n+=getTemplate("nospam_reports_tag",{tag_label:e.update_time}));break;case N:if(e.group_id&&e.group_link&&(n+=getTemplate("nospam_reports_group_id",{group_id:e.group_id,group_link:e.group_link})),e.admin_id&&e.admin_link){var i=e.admin_id;n+=getTemplate("nospam_reports_admin_id",{admin_id:i,admin_link:e.admin_link})}break;case 160:n+=e.title;break;case 161:n+=e.new_title;break;case 200:e.attaches,e.uid==O&&e.original_user_link&&(n+=getTemplate("nospam_reports_molodec_label",{original_user_link:e.original_user_link}));case 2602:case 2647:t="<a href='/video"+e.owner_id+"_"+e.video_id+"' target='_blank'> "+a+"</a>";break;case 2600:case 2610:case 2611:case 2645:case 2650:t="<a href='/video"+e.owner_id+"_"+e.video_id+"' target='_blank'> "+a+"</a>",n+='<table class="report_video"><tr>',n+='<td style="width: 130px;"><a class="report_video_thumb" href="'+e.video.href+'" onclick="'+e.video.onclick+'" style="background-image: url(\''+e.video.thumb+'\')"><div class="report_video_duration"><span class="report_video_icon"></span><span class="report_video_duration_text">'+e.video.duration_text+"</span></div></a></td>",n+="<td>",n+=e.video.DELETED?"Видеозапись удалена":'<div class="report_video_title"><a href="'+e.video.href+'" onclick="'+e.video.onclick+'">'+e.video.title_short+"</a></div>",n+=!e.video.DELETED&&e.description?'<div class="report_video_description">'+e.video.description_short+"</div>":"",n+="</td>",n+="</tr></table>",n+='<div class="report_video_duration_second"><b>Duration:</b> <a class="_console_conditions" data-conditions="duration = '+e.duration+'">'+e.duration+"</a></div>",e.external&&(n+='<div class="report_video_external"><b>External:</b> '+e.external+"</div>");break;case 3504:case 3545:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+a+"</a>";break;case 13120:case 13121:t="<a href='/market"+e.owner_id+"?w=product"+e.owner_id+"_"+e.item_id+"' target='_blank'> "+a+"</a>";break;case 3500:case 3547:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+a+"</a>",n+='<table class="report_photo"><tr>',n+='<td><div class="report_photo_thumb">'+e.photo+"</div></td>",n+=e.description?'<td><div class="report_photo_description">'+e.description+"</div></td>":"",n+="</tr></table>",n+=e.album_id<0?'<div class="report_album_id"><b>album_id:</b> '+e.album_id+"</div>":"";break;case 3550:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+a+"</a>",n+=e.photo,n+=e.album_id<0?'<div class="report_album_id"><b>album_id:</b> '+e.album_id+"</div>":"";break;case 9258:n+=e.about;break;case 1800:n+=e.status;break;case 1531:case 1530:case 1534:n+=e.text;break;case 5e3:t="<a href='/topic-"+e.group_id+"_"+e.topic_id+"' target='_blank'> "+a+"</a>",n+=e.title;break;case 5001:case 5046:t="<a href='/topic-"+e.group_id+"_"+e.topic_id+"?post="+Math.abs(e.comment_id)+"' target='_blank'> "+a+"</a>";break;case 2131:var s=e.group_id;t="Группа: "+getTemplate("nospam_reports_id_link",{type:"club",id:s,label:s,color:"black"}),n+="<b>Название:</b>"+e.group_name+"<br>",n+="<b>Описание:</b>"+e.group_description+"<br>";break;case 7530:t="<a href='/app"+e.app_id+"' target='_blank'> "+a+"</a>",n+=e.app_name+"<br>";break;case 3670:var c=e.like_ref,l=e.like_type,d=e.owner_id+"_"+e.item_id,u="";switch(Number(l)){case 11:t="<a href='wall<a href='wall"+d+"' target='_blank'> "+a+"</a>",u+="(запись на стене), <a href='wall"+d+"' target='_blank'>vk.com/wall"+d+"</a>";break;case 12:t="<a href='wall"+d+"' target='_blank'> "+a+"</a>",u+="(комментарий на стене), <a href='wall"+d+"' target='_blank'>vk.com/wall"+d+"</a>";break;case 10:t="<a href='photo"+d+"' target='_blank'> "+a+"</a>",u+="(фотография), <a href='photo"+d+"' target='_blank'>vk.com/photo"+d+"</a>";break;case 24:case 8:t="<a href='photo"+d+"' target='_blank'> "+a+"</a>",u+="(видеозапись), <a href='video"+d+"' target='_blank'>vk.com/video"+d+"</a>";break;case 6:t="<a href='audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"' target='_blank'> "+a+"</a>",u+="(аудиозапись), <a href='audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"' target='_blank'>vk.com/audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"</a>";break;case 22:t=a,u+="(комментарий к видео)";break;case 21:t=a,u+="(комментарий к фотографии)";break;case 20:t=a,u+="(комментарий на стене)";break;default:t=a,u+=" (незвестный тип) "+d}n+=getTemplate("nospam_reports_report_like",{like_ref:c,like_ref_id:e.ref,like_type:u,like_type_id:l});break;default:console.log("No type specified")}if(e.post_tags){var p=e.post_tags;Object.keys(p).forEach(function(e){p[e]&&(n=getTemplate("nospam_reports_tag",{tag_label:p[e]})+n)})}return r.innerHTML=n,[r,t]}function u(e){var t=e.mem_banned,n=isObject(t),a=n?"Недавняя блокировка:<br>"+t.comment+"<br>"+m(new Date(1e3*t.time)):"",o="",r=s(e.ui_type,e.index),i=e.uid_base_info,c=void 0,l=void 0;""==a&&i&&(c=i[0].pattern_id,l=i[0].state,n=!0,a=0==Number(l)?"Ожидает обработки noSpam ":"Обработан noSpam ",a=a+"(шаблон номер <a href='/pattern"+Number(c)+"' target='_blank'>"+Number(c)+"</a>)");var u=ce("div");addClass(u,"report_info"),n&&addClass(u,"report_banned"),a&&(o=getTemplate("nospam_reports_report_ban_tooltip",{action_index:r}),I[r].ban_tt=a);var p=void 0,_=e.uid,f=Number(e.type),h=n?"red":"blue";p=_>0?getTemplate("nospam_reports_id_link",{type:"id",id:_,label:_,color:h}):getTemplate("nospam_reports_id_link",{type:"club",id:-_,label:_,color:h});var g=void 0,v=d(e),b=D(v,2);return g=b[1],u.innerHTML=getTemplate("nospam_reports_report_info",{action_mention_link:p,action_tt:o,type:f,index:e.index,ip:e.ip,report_time:m(new Date(1e3*e.report_time)),action_time:m(new Date(1e3*e.time)),ua_hash:e.ua_hash,from_uid:e.from_uid,report_count:e.report_count>1?langNumeric(e.report_count,["","%s жалоба","%s жалобы","%s жалоб"]):"",report_type_link:g}),u}function p(e,t){var n="",a="report_"+e.ui_type+"_"+e.index,o=ce("div");if(addClass(o,"report_steps"),"photo"==e.ui_type||"video"==e.ui_type){var r="dealSingleSpamer('"+e.ui_type+"', "+e.uid+", "+e.index+")";n+="<span id = 'spamer_by_"+a+"'> <a onclick = \""+r+'"> Забанить и откатить </a> </span>'}return n+=getTemplate("nospam_reports_compose_button",{type:e.real_ui_type?e.real_ui_type:e.ui_type,ip:e.ip,ua_hash:e.ua_hash}),n+="<span id='selected_text_span"+t+"' style='display:none;'></span>",o.innerHTML=n,o}function _(e,t,n){var a="report_"+e+"_"+n,o=function(){ge("spamer_by_"+a).innerHTML="<span style = 'color: green'> Добавлен </span>"},r=function(){ge("spamer_by_"+a).innerHTML="<span style = 'color: red'> Неудача </span>"};ajax.post("noSpam.php",{act:"a_single_spamer",uid:t,type:e,action:JSON.stringify(I[ge(a)])},{onDone:o,onFail:r})}function m(e){var t=e.getDate(),n=e.getMonth()+1;return(10>t?"0":"")+t+"."+(10>n?"0":"")+n+" в "+e.toLocaleTimeString()}function f(e){Object(L.isSpecialKeyPressed)(e)?g(e.target):h(e.target)}function h(e){var t=domData(e,"type"),n=domData(e,"ip"),a=domData(e,"ua-hash");null!==t&&(("post"==t||"comment"==t)&&(t="wall"),Object(S.setIp)(n),Object(S.setUaHash)(a),Object(S.setThreshold)(1),cur.uiSpamtype.selectItem(t),Object(T.switchTab)(T.tabPattern),Object(S.optionClear)(!1,"reset_all"))}function g(e){var t=Object(S.getParams)();if(t.type=domData(e,"type"),null===t.type)return!1;("post"===t.type||"comment"===t.type)&&(t.type="wall"),t.ip=domData(e,"ip"),t.uahash=domData(e,"ua-hash"),t.pattern=t.pattern||getSelectionText(),t.threshold=1;var n=Object(S.composeSearchLinkFromParams)(t);return Object(L.openInNewTab)(n)}function v(e){var t=e.target,n=domData(t,"action-index"),a=I[n].ban_tt;a&&showTooltip(t,{text:a,dir:"down",hasover:1,shift:[22,5,0]})}function b(e,t){var n=W[e];W[e]?n&&n!==t&&debugLog("collision for "+e,t,n):W[e]=t}function k(e){var t=e.target,n=domData(t,"ua-hash"),a=W[n];showTooltip(t,{text:a?a:"[NULL]",dir:"down",hasover:1,shift:[22,5,0]})}function w(){if(Object(T.getCurrentTab)()===T.tabReports){var e=a(),t=geByClass1("_reports_"+e+"_wrap",T.reportList),n=geByClass1("_report_show_more",domPN(t)),o=domPN(n),r=window.innerHeight||document.documentElement||bodyNode.clientHeight;U=scrollGetY(),isVisible(o)&&Object(T.activeTab)()===T.tabReports&&r+U>n.offsetTop&&n.click()}}function y(){clearTimeout(A),A=setTimeout(r.pbind(a(),o()),1e3)}function C(){var e=Object(B.createModule)({handlers:function(e,t){t(T.reportList,"mouseover","report_steps",l),t(T.reportList,"click","report_steps",function(e){return f(e)}),t(T.reportList,"mouseover","report_info_ban_tooltip",function(e){return v(e)}),t(T.reportList,"mouseover","report_info_ua_hash",function(e){return k(e)}),e(document,"scroll",w),t(T.reportList,"click","_report_show_more",function(e){var t=domData(e.target,"need-shift"),n=a();c(n,t)}),t(T.reportTabs,"click","report_filter",function(e){return i(e)}),t(T.reportList,"click","_report_btn_update",function(e){r(a(),o())}),t(T.reportTabs,"mouseover","settings_dots_wrap",function(e){function t(){var e=ge("search_shift_filter");cur.hoursShiftSlider=new Slider(e,{width:200,height:100,debounce:10,size:2,value:parseFloat(nav.objLoc.shift/23)||0,onChange:function(e){Object(L.updateUrl)({shift:parseInt(23*e)}),y()},formatHint:function(e){return langNumeric(parseInt(23*e),["","%s час назад","%s часа назад","%s часов назад"])}})}var n=geByClass1("settings_dots_wrap");showTooltip(n,{black:!0,text:getTemplate("reports_group_message_tab_tooltip"),className:"group_messages_settings_tt",slideY:15,shift:[98,100,20],dir:"top",showdt:300,hidedt:100,hasover:!0,onCreate:function(){t(),Object(L.initRadioButtons)("group_messages_reports_sorting","sorting_radio_filter_wrap",1)}})})}});cur.destroy.push(function(){Object(B.destroyModule)(e)})}n.r(t),n.d(t,"activeReportsType",function(){return a}),n.d(t,"activeSubReportsType",function(){return o}),n.d(t,"prepareReport",function(){return r}),n.d(t,"switchReports",function(){return i}),n.d(t,"dealSingleSpamer",function(){return _}),n.d(t,"reportsTime",function(){return V}),n.d(t,"onFiltersChange",function(){return y}),n.d(t,"mount",function(){return C}),n.d(t,"noSpamReports",function(){return z});var S=n(142),T=n(295),x=n(243),L=n(196),B=n(39),D=function(){function e(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(c){o=!0,r=c}finally{try{!a&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j=20,H="report_subfilter_active",P="active_filter",E="active_type",O=-152029297,N=300,F=100,I={},W={},R=new Date,A=setTimeout(null),U=0,V={_sel:[],day:R.getDate(),month:R.getMonth(),months:[[0,"Января"],[1,"Февраля"],[2,"Марта"],[3,"Апреля"],[4,"Мая"],[5,"Июня"],[6,"Июля"],[7,"Августа"],[8,"Сентября"],[9,"Октября"],[10,"Ноября"],[11,"Декабря"]],year:R.getFullYear(),generateHMS:function(e){var t,n=[];switch(e){case"hour":t=23;break;case"minute":t=59;break;case"second":t=59}for(var a=0;t>=a;++a)n.push([a,10>a?"0"+a:a+""]);return n},generateDays:function(e,t){for(var n=[],a=this.getLastDay(e,t),o=1;a>=o;++o)n.push([o,o+""]);return n},isLeapYear:function(e){return e=parseInt(e),e%4==0&&e%100!=0||e%400==0},getLastDay:function(e,t){return t=parseInt(t)+1,2==t?this.isLeapYear(e)?29:28:t>0&&(8>t&&t%2==0||t>7&&t%2==1)?30:31},updateDays:function(){var e=this._sel[0],t=this._sel[1].val(),n=this._sel[2].val();e.val()>this.getLastDay(n,t)&&e.clear(),e.setData(this.generateDays(n,t))},setControls:function(){var e=V,t=[["reports_day",55],["reports_month",95],["reports_year",60],["reports_hour",50],["reports_minute",50],["reports_second",50]],n=ce("div",{id:"reports_time_wrap",className:"reports_time_wrap"}),a=geByClass1("box_body");e.clear(),a.appendChild(n),t.forEach(function(n,o){var r=[],i=[],s=ce("div",{className:n[0]+" fl_l"}),c=ce("input",{type:"hidden",name:n[0],id:n[0]}),l=n[0].split("_")[1];switch(domLC(a).appendChild(s),s.appendChild(c),l){case"year":r=[[e.year,e.year+""]],i=r[0];break;case"month":r=e.months,i=e.month;break;case"day":r=e.generateDays(e.year,e.month),i=r[e.day-1];break;case"hour":r=e.generateHMS(l),i=R.getHours();break;case"minute":r=e.generateHMS(l),i=R.getMinutes();break;case"second":r=e.generateHMS(l),i=R.getSeconds();break;default:r=e[l],i=r}var d={width:t[o][1],multiselect:!1,autocomplete:!1,selectedItems:i};("month"===l||"year"===l)&&extend(d,{onChange:function(e){V.updateDays()}}),V._sel.push(new Dropdown(c,r,d))})},setTime:function(){boxQueue.hideLast();var e=V,t=e._sel,n={day:t[0].val(),month:t[1].val(),year:t[2].val(),hour:t[3].val(),minute:t[4].val(),second:t[5].val()},a=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second),o=e.tt;val(o,a.getTime()/1e3)},set:function(e,t){var n=this.setControls,a=this.setTime,o=domData(t,"part");R=new Date;var r=o?"time_"+e+"_input2":"time_"+e+"_input";this.tt=ge(r,T.patternWrap),showFastBox({width:435,title:"Время действия ("+("start"==e?"позже":"раньше")+", чем)",dark:1,containerClass:"nospam_report_time_box",onShow:n},'<div class="reports_time_label">Укажите дату:</div>',"Применить",a)},clear:function(){return this._sel=[]}},z={initUpdate:function(){scrollToY(U)}}},39:function(e,t,n){"use strict";function a(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,arguments)}}}function o(e,t,n,a){d(t,n,a),e._registeredHandlers.push(["bind",t,n,a])}function r(e,t,n,a,o){Object(c.addDelegateEvent)(t,n,a,o),e._registeredHandlers.push(["delegate",t,n,a,o])}function i(e){var t={_registeredHandlers:[]};return e.handlers(o.bind(null,t),r.bind(null,t)),t}function s(e){e._registeredHandlers.forEach(function(e){var t=e.slice(1);"delegate"===e[0]?c.removeDelegateEvent.apply(void 0,t):u.apply(void 0,t)}),e._registeredHandlers=[]}n.r(t),n.d(t,"createMutations",function(){return a}),n.d(t,"createModule",function(){return i}),n.d(t,"destroyModule",function(){return s});var c=n(298),l=window,d=l.addEvent,u=l.removeEvent},404:function(e,t,n){"use strict";n.r(t),n.d(t,"noSpamSuspicious",function(){return a});var a={selected:"ua_hash",updateOnSelect:function(){return a.getByType(a.selected)},getSpamType:function(){return isObject(this.spamtype)?this.spamtype._selected[0]:"wall"},getPeriod:function(){return isObject(this.period)?this.period._selected[0]:1},getByType:function(e){var t=ge("suspicious_table"),n=geByClass1("summary_tab_sel","suspicious_tabs"),a=isVisible("suspicious_tabs")?0:1,o=this;this.selected=e;var r=ge("suspicious_spamtype"),i=ge("suspicious_period"),s=geByClass("_suspicious_msg"),c=geByClass1("_suspicious_"+e+"_msg");each(s,function(e,t){hide(t)}),show(c),"hashtags"==e?hide(r):show(r),"users"==e&&hide(r,i),a&&(t=ge("suspicious")),removeClass(n,"summary_tab_sel");var l=function(e){return e?(t.innerHTML=e,void o.initInlineDropdown()):topError(getLang("nospam_suspicious_data_error"))},d={act:"a_get_suspicious",type:e,spamtype:this.getSpamType(),period:this.getPeriod(),need_tabs:a};addClass("suspicious_"+e,"summary_tab_sel"),ajax.post("noSpam.php",d,{onDone:l,progress:"suspicious_progress"})},initInlineDropdown:function(){var e={withArrow:!0,keepTitle:!0,autoShow:!0,autoHide:300,onSelect:a.updateOnSelect},t=extend({items:cur.options.spamtypes,selected:"wall"},e),n=extend({items:[[1,"Один час"],[2,"Два часа"],[5,"5 часов"],[10,"10 часов"],[24,"Сутки"]],selected:1},e);this.spamtype||(this.spamtype=new InlineDropdown("suspicious_spamtype",t)),this.spamtype._els.valueEl.innerHTML=this.spamtype._selected[1],this.period||(this.period=new InlineDropdown("suspicious_period",n)),this.period._els.valueEl.innerHTML=this.period._selected[1]}}},509:function(e,t,n){"use strict";function a(){addEvent(document,"mousedown",o)}function o(e){if(e.altKey){var t=null;if("a"===e.target.tagName.toLowerCase()&&e.target.href)t=decodeURIComponent(e.target.href);else{if("a"!==domPN(e.target).tagName.toLowerCase()||!domPN(e.target).href)return;t=decodeURIComponent(domPN(e.target).href)}var n=r(t);n&&(cancelEvent(e),window.open(n,"_blank"))}}function r(e){var t={text:v,duration:b,searchPeriod:g,ban:h,simplify:f},n=i(e);if(!n)return!1;var a=extend(t,n);return"https://vk.com/noSpam?text="+a.text+"&type="+a.spamType+"&simplify="+a.simplify+"&duration="+a.duration+"&search_period="+a.searchPeriod+"&ban="+a.ban+"&conditions="+a.conditions}function i(e){var t=s(e);return t?(t.conditions=encodeURIComponent(t.conditions),t):!1}function s(e){var t=e.match(new RegExp("(-?\\d+)_(\\d+)"));if(!t)return!1;var n=parseInt(t[1]),a=parseInt(t[2]),o=e.match(new RegExp("wall-?\\d+_\\d+\\?z=photo(-?\\d+)_(\\d+).*"));if(o){var r=o[1],i=o[2];return{spamType:l,conditions:"owner_id = "+r+" && photo_id = "+i}}var s=e.match(new RegExp("photo"));if(s)return{spamType:l,conditions:"owner_id = "+n+" && photo_id = "+a};var f=e.match(new RegExp("wall-?\\d+_\\d+\\?z=video(-?\\d+)_(\\d+).*"));if(f){var h=f[1],g=f[2];return{spamType:d,conditions:"owner_id = "+h+" && video_id = "+g}}var v=e.match(new RegExp("youtube.*v=([^&]+)"));if(v)return{spamType:d,conditions:v[1]+"'<<external"};var b=e.match(new RegExp("video"));if(b)return{spamType:d,conditions:"owner_id = "+n+" && video_id = "+a};var k=e.match(new RegExp("wall-?\\d+_\\d+\\?z=doc(-?\\d+)_(\\d+).*"));if(k)return{spamType:u,conditions:"owner_id = "+n+" && doc_id = "+a};var w=e.match(new RegExp("doc"));if(w)return{spamType:u,conditions:"owner_id = "+n+" && doc_id = "+a};var y=e.match(new RegExp("note"));if(y)return{spamType:p,conditions:"owner_id = "+n+" && note_id = "+a};var C=-n,S=e.match(new RegExp("topic.*post=(\\d+)"));if(S){var T="-"+S[1];return{spamType:m,conditions:"group_id = "+C+" && topic_id = "+a+" && comment_id = "+T}}var x=e.match(new RegExp("topic"));if(x)return{spamType:m,conditions:"group_id = "+C+" && topic_id = "+a};var L=e.match(new RegExp("page"));if(L)return n=-parseInt(n),{spamType:_,conditions:"group_id = "+n+" && page_id = "+a};var B=e.match(new RegExp("wall-?\\d+_\\d+\\?reply=\\d+&w=wall.*"));if(B)return{spamType:c,conditions:"owner_id = "+n+" && msg_id = "+a};var D=e.match(new RegExp("wall-?\\d+_\\d+\\?w=wall-\\d+_\\d+_r(\\d+)|wall-?\\d+_\\d+\\?reply=(\\d+)"));if(D){var M=D[1]||D[2];return{spamType:c,conditions:"owner_id = "+n+" && msg_id = "+M}}var j=e.match(new RegExp("wall"));return j?{spamType:c,conditions:"owner_id = "+n+" && msg_id = "+a}:(topError("Undefined spam type"),!1)}n.r(t),n.d(t,"init",function(){return a});var c="wall",l="photo",d="video",u="docs",p="note",_="wiki",m="topic_comment",f=32,h=1,g=24,v="%2F",b=4},529:function(e,t,n){"use strict";n.r(t),n.d(t,"noSpamTemplates",function(){return o});var a=n(142),o=function(e){this.selected=0,extend(this,e),this.templates=JSON.parse(e.templates)};o.prototype={addTemplate:function(){showBox("noSpam.php",{act:this.acts.add},{params:{width:430,dark:1,progress:"add_template"}})},saveTemplate:function(e){var t=cur[e],n=t.selected||0;if(ge("add_template_title")&&ge("add_template_text")){var a=trim(ge("add_template_title").value),o=trim(ge("add_template_text").value);if(!a)return notaBene("add_template_title");if(!o)return notaBene("add_template_text");var r=function(e,n){var a=ge(t.links);a.innerHTML=e,hasClass(a,"template_links")||addClass(a,"template_links"),t.templates=JSON.parse(n),curBox().hide()},i={act:t.acts.save,title:a,text:o,hash:t.hash,template_id:n};ajax.post("noSpam.php",i,{onDone:r,progress:n?"edit_template":"add_template"})}},editTemplate:function(){var e={act:this.acts.edit,template_id:this.selected,hash:this.hash};showBox("noSpam.php",e,{params:{width:430,dark:1,progress:"edit_template"}})},deleteTemplate:function(){var e=this;if(!this.selected)return!1;var t=function(){var t=e.selected,n={act:e.acts.remove,template_id:t,hash:e.hash},a=function(t,n){var a=ge(e.links);a.innerHTML=t,e.deselectTemplate(),e.templates=JSON.parse(n),isObject(e.templates)||removeClass(a,"template_links"),curBox().hide()};ajax.post("noSpam.php",n,{onDone:a,progress:"delete_condition"})},n={title:"Удаление шаблона",width:430,dark:1,progress:"delete_condition"};showFastBox(n,getLang("nospam_delete_template"),getLang("global_delete"),t,getLang("global_cancel"))},selectTemplate:function(e){if(e){var t=this.templates[e];this.selected=e;var n=entityDecode(t.text);Object(a.setConditions)(n),this.label.innerHTML=t.title+": ",addClass(this.wrap,"template_selected")}},selectCommentTemplate:function(e){if(e){var t=this.templates[e];this.selected=e;var n=entityDecode(t.text);this.editComment(n),this.label.innerHTML=t.answer_name+": ",addClass(this.wrap,"template_selected")}},editComment:function(e){return val(this.input,e),this.input.autosize?this.input.autosize.update():void autosizeSetup("comment_input",{minHeight:32})},getFromLocal:function(e){var t=localStorage.comments_templates_storage;ge("get_local_comments");try{t=JSON.parse(t)}catch(n){}return t?t&&e?(each(t,function(e,t){var n=function(e,t){var n=ge("comment_template_links");hasClass(n,"template_links")||addClass(n,"template_links"),cur.comment.links.innerHTML=e,cur.comment.templates=JSON.parse(t)};setTimeout(function(){var e=t[1];ajax.post("noSpam.php",{act:"save_comment_template",title:e.name,text:e.comment,hash:opts.comment_hash,template_id:0},{onDone:n})},1e3*e)}),curBox().hide()):void showBox("noSpam.php",{act:"apply_comments_export"},{params:{width:430,dark:1,progress:"export_progress"}}):showFastBox({title:"Перенос шаблонов",dark:1},"К сожалению, не удалось найти ни одного комментария.")},deselectTemplate:function(){var e=this.selected,t=this.templates[e];if(t){var n=entityDecode(this.templates[e].text);t&&this.input.value==n&&val(this.input,""),this.label.innerHTML=this.label_html,removeClass(this.wrap,"template_selected"),delete this.selected}},editSort:function(){var e={act:this.acts.sort,hash:this.hash};showBox("noSpam.php",e,{params:{width:430,dark:1,progress:"sort_template"}})},saveSort:function(e,t,n,a,o){var r=cur[e],i={hash:t,act:r.acts.sort_save,tid:n.id.replace("template",""),tpos:n.dataset.pos,after_id:a&&a.dataset?a.dataset.pos:"",before_id:o&&o.dataset?o.dataset.pos:""},s=function(e,t){box=curBox(),box.content(e[2]),box.evalBox(t),box.setOptions({onHide:function(){debugLog(e),r.links.innerHTML=e[0],r.templates=JSON.parse(e[1])}})};ajax.post("noSpam.php",i,{onDone:s,progress:"sort_template"})}}},661:function(e,t,n){"use strict";function a(e){return se("<textarea>"+e+"</textarea>").value}function o(e){var t=document,n=t.getElementById(e);if(t.body.createTextRange){var a=t.body.createTextRange();a.moveToElementText(n),a.select()}else if(window.getSelection){var o=window.getSelection(),a=t.createRange();a.selectNodeContents(n),o.removeAllRanges(),o.addRange(a)}}function r(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function i(){var e="";return window.getSelection?e=window.getSelection():document.getSelection?e=document.getSelection():document.selection&&(e=document.selection.createRange().text),e}function s(e){var t=ge(e);return t.options[t.selectedIndex].value}function c(e,t,n,a){ajax.post("noSpam.php",{act:"a_block_domain",domain:e,type:t,hash:n,warn_users:isChecked("warn_users")||0,comment:ge("linksban_comment").value,link_ex:a},{onDone:function(n){ge("block_domain_1_"+e).innerHTML="",ge("block_domain_2_"+e).innerHTML="",ge("block_domain_3_"+e).innerHTML="",ge("block_domain_"+t+"_"+e).innerHTML=n}})}function l(e,t){ajax.post("noSpam.php",{act:"a_remove_fid_search",fid:e,hash:t},{onDone:function(t){ge("remove_fid_search_"+e).innerHTML=t}})}function d(e,t){ajax.post("noSpam.php",{act:"a_ban_fid_zero",fid:e,hash:t},{onDone:function(t){ge("ban_fid_zero_"+e).innerHTML=t}})}function u(e,t){ajax.post("noSpam.php",{act:"a_ban_fid_forever",fid:e,hash:t},{onDone:function(t){ge("ban_fid_forever_"+e).innerHTML=t}})}n.r(t),n.d(t,"entityDecode",function(){return a}),n.d(t,"selectText",function(){return o}),n.d(t,"removeSelectedText",function(){return r}),n.d(t,"getSelectedText",function(){return i}),n.d(t,"selectValue",function(){return s}),n.d(t,"blockDomain",function(){return c}),n.d(t,"removeFidSearch",function(){return l}),n.d(t,"banFidZero",function(){return d}),n.d(t,"banFidForever",function(){return u});var p=n(300);n.d(t,"noSpamPatterns",function(){return p.noSpamPatterns}),n.d(t,"abortPatternMild",function(){return p.abortPatternMild});var _=n(404);n.d(t,"noSpamSuspicious",function(){return _.noSpamSuspicious});var m=n(529);n.d(t,"noSpamTemplates",function(){return m.noSpamTemplates});var f=n(322);n.d(t,"dealSingleSpamer",function(){return f.dealSingleSpamer}),n.d(t,"reportsTime",function(){return f.reportsTime}),n.d(t,"onFiltersChange",function(){return f.onFiltersChange});var h=n(75);n.d(t,"rollbackDocMailSpamer",function(){return h.rollbackDocMailSpamer}),n.d(t,"rollbackDocWallSpamer",function(){return h.rollbackDocWallSpamer}),n.d(t,"rollbackJpgMailSpamer",function(){return h.rollbackJpgMailSpamer}),n.d(t,"rollbackJpgWallSpamer",function(){return h.rollbackJpgWallSpamer}),n.d(t,"rollbackPngMailSpamer",function(){return h.rollbackPngMailSpamer}),n.d(t,"rollbackPngWallSpamer",function(){return h.rollbackPngWallSpamer}),n.d(t,"rollbackDocSpamer",function(){return h.rollbackDocSpamer}),n.d(t,"rollbackPhotoSpamer",function(){return h.rollbackPhotoSpamer}),n.d(t,"rollbackPhotoSpamerFromWall",function(){return h.rollbackPhotoSpamerFromWall}),n.d(t,"rollbackPhotoSpamerFromMail",function(){return h.rollbackPhotoSpamerFromMail}),n.d(t,"rollbackVideoSpamer",function(){return h.rollbackVideoSpamer}),n.d(t,"rollbackVideoSpamerFromWall",function(){return h.rollbackVideoSpamerFromWall}),n.d(t,"rollbackVideoSpamerFromMail",function(){return h.rollbackVideoSpamerFromMail})},706:function(e,t,n){"use strict";n.r(t);var a=n(661),o=n(295),r=n(142),i=n(509),s=n(121);window.noSpamConsole={setIp:r.setIp,setUaHash:r.setUaHash,switchParams:r.switchParams,addPatternPart:r.addPatternPart,optionClear:r.optionClear,getConditionsHint:r.getConditionsHint,conditionsClear:r.conditionsClear},window.noSpamUI={switchTab:o.switchTab},extend(window,a),window.noSpam={init:function(e){cur.options=extend(cur.options||{},e.pattern),extend(cur,{mousedown:0,module:"noSpam",selectedTab:"pattern",conditions:new noSpamTemplates({input:ge("conditions_input"),wrap:ge("templates_wrap"),label:geByClass1("templates_label","templates_wrap"),label_html:"Шаблоны:",links:"template_links",hash:e.template_hash,templates:e.templates_json,acts:{add:"add_template",save:"save_template",edit:"edit_template",remove:"delete_template",sort:"sort_template"}}),comment:new noSpamTemplates({input:ge("comment_input"),wrap:ge("comment_templates_wrap"),label:geByClass1("templates_label","comment_templates_wrap"),label_html:'<span class="template_sort" onclick="return cur.comment.editSort();">Шаблоны</span>:',links:ge("comment_template_links"),hash:e.comment_hash,templates:e.comment_templates_json,acts:{add:"add_comment_template",save:"save_comment_template",edit:"edit_comment_template",remove:"delete_comment_template",sort:"sort_comment_templates",sort_save:"save_comment_sort"}}),getIpWithBits:function(e){return Object(r.getNumericField)("ip"+e)},numFieldCheck:function(e,t){toggleClass(e,"on",t);var n=cur.numFieldGetChecked();ge("numeric_field_checked").innerHTML=n.length||0,cur.numFieldPattern()},numFieldCheckAll:function(e){var t=hasClass(e,"toggled"),n=curBox(),a=geByClass("checkbox",n.bodyNode);each(a,function(e,n){cur.numFieldCheck(n,t?0:1)}),t?removeClass(e,"toggled"):addClass(e,"toggled"),e.innerHTML=t?getLang("nospam_numfield_select_all"):getLang("nospam_numfield_deselect_all")},numFieldCheckbox:function(e){var t=geByClass1("numeric_field_checkbox",e.parentNode);return t?t.parentNode:!1},numFieldGetChecked:function(){var e=curBox().bodyNode,t=geByClass("on",e),n=[];return each(t,function(e,t){e=trim(t.dataset.value),e&&n.push(e)}),n||[]},numFieldCondition:function(e){var t=cur.numFieldSel,n=t.match(/^ip([0-9]+)$/i);n&&intval(n[1])&&(t="(ip & -"+n[1]+")");var a=cur.numFieldGetChecked();if(0!==a.length){var o=a?1===a.length?t+" = "+a:t+" IN ("+a.join(", ")+")":"";return e?o:void(a&&(Object(r.setConditions)(o),curBox().hide()))}},numFieldOver:function(e){removeSelectedText();var t=cur.numFieldCheckbox(e.target);1===cur.mousedown&&t&&cur.numFieldCheck(t)},numFieldClick:function(e){var t=e.target,n=cur.numFieldCheckbox(t);hasClass(t,"ui_table_cell")&&n&&cur.numFieldCheck(n)},numFieldPattern:function(){var e=cur.numFieldCondition(1)||"",t="/noSpam?bantype=1&comment=&duration=1&pattern=%2F&search_period=24&simplify=32&type="+cur.uiSpamtype.val()+"&conditions="+encodeURIComponent(e),n=ge("numeric_field_pattern");n.href=t},showFullValue:function(e){return hasClass(e,"full_value")?removeClass(e,"full_value"):addClass(e,"full_value")},showMoreOptions:function(e){var t=geByClass("checkbox",ge("search_options"));t.forEach(function(e,t){hasClass(e,"secondary")&&(e.style.display=isVisible(e)?"none":"inline-block")})},getGraphsBox:function(e){return cur.graphs=showTabbedBox("noSpam.php",{act:"a_get_moders_stats"},{dark:1})},toggleHistogram:function(e){e.innerHTML=isChecked(e)?"без гистограммы":"гистограммой",checkbox(e)},toggleIp:function(e){var t=clean(e.dataset.ipLong||"");return Object(r.setIp)(t)},toggleUa:function(e){var t=clean(e.dataset.uaHash||"");return Object(r.setUaHash)(t)},sharePatternLink:function(e){var t=setTimeout.pbind(function(){var e=ge("shorten_link").innerText;ge("mail_box_editable").innerHTML=e},5);showBox("al_im.php",{act:"a_write_box"},{stat:["writebox.js","writebox.css","wide_dd.css","page.css","emoji.js","notifier.css"],onDone:t},e)}}),cur.onmousedown=function(e){cur.mousedown=e},addEvent(document,"mousedown",cur.onmousedown.pbind(1)),addEvent(document,"mouseup",cur.onmousedown.pbind(0)),cur.options.shift=e.shift,cur.destroy=[removeEvent.pbind(document,"mouseup"),removeEvent.pbind(document,"mousedown"),removeEvent.pbind(document,"keydown"),removeEvent.pbind(document,"click")],Object(r.init)(e.localstorage_restore_conditions),Object(o.init)(e.pattern),e.tab&&Object(o.switchTab)(e.tab)},initTypesEdit:s.init,initFastPatterns:i.init.pbind()};try{stManager.done(jsc("internal/nospam.js"));
}catch(c){console.log(c.message)}},75:function(e,t,n){"use strict";function a(e){var t=ge("console_item_"+e);hasClass(t,g)&&removeClass(t,g),addClass(t,v)}function o(e,t,n,o,r,i){var s=function(t){ge("rollback_docmail_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_docmail_spamer",uid:e,hash:t,act_type:n,spam_date:o,to_id:r,to_msg_id:i},{onDone:s})}function r(e,t,n,o,r,i){var s=function(t){ge("rollback_docwall_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_docwall_spamer",uid:e,hash:t,act_type:n,spam_date:o,owner_id:r,msg_id:i},{onDone:s})}function i(e,t,n,o,r,i){var s=function(t){ge("rollback_jpgmail_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_jpgmail_spamer",uid:e,hash:t,act_type:n,spam_date:o,to_id:r,to_msg_id_id:i},{onDone:s})}function s(e,t,n,o,r,i){var s=function(t){ge("rollback_jpgwall_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_jpgwall_spamer",uid:e,hash:t,act_type:n,spam_date:o,owner_id:r,msg_id:i},{onDone:s})}function c(e,t,n,o,r,i){var s=function(t){ge("rollback_pngmail_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_pngmail_spamer",uid:e,hash:t,act_type:n,spam_date:o,to_id:r,to_msg_id:i},{onDone:s})}function l(e,t,n,o,r,i){var s=function(t){ge("rollback_pngwall_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_pngwall_spamer",uid:e,hash:t,act_type:n,spam_date:o,owner_id:r,msg_id:i},{onDone:s})}function d(e,t,n,o,r,i){var s=function(t){ge("rollback_doc_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_doc_spamer",uid:e,hash:t,act_type:n,spam_date:o,owner_id:r,doc_id:i},{onDone:s})}function u(e,t,n,o,r,i){var s=function(t){ge("rollback_photo_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_photo_spamer",uid:e,hash:t,act_type:n,spam_date:o,owner_id:r,photo_id:i},{onDone:s})}function p(e,t,n,o,r,i){var s=function(t){ge("rollback_photo_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_photo_spamer_from_wall",uid:e,hash:t,act_type:n,spam_date:o,owner_id:r,msg_id:i},{onDone:s})}function _(e,t,n,o,r,i){var s=function(t){ge("rollback_photo_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_photo_spamer_from_mail",uid:e,hash:t,act_type:n,spam_date:o,to_id:r,to_msg_id:i},{onDone:s})}function m(e,t,n,o,r,i){var s=function(t){ge("rollback_video_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_video_spamer",uid:e,hash:t,act_type:n,spam_date:o,owner_id:r,video_id:i},{onDone:s})}function f(e,t,n,o,r,i){var s=function(t){ge("rollback_video_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_video_spamer_from_wall",uid:e,hash:t,act_type:n,spam_date:o,owner_id:r,msg_id:i},{onDone:s})}function h(e,t,n,o,r,i){var s=function(t){ge("rollback_video_spamer"+e).innerHTML=t,a(e)};ajax.post("noSpam.php",{act:"rollback_video_spamer_from_mail",uid:e,hash:t,act_type:n,spam_date:o,to_id:r,to_msg_id:i},{onDone:s})}n.r(t),n.d(t,"rollbackDocMailSpamer",function(){return o}),n.d(t,"rollbackDocWallSpamer",function(){return r}),n.d(t,"rollbackJpgMailSpamer",function(){return i}),n.d(t,"rollbackJpgWallSpamer",function(){return s}),n.d(t,"rollbackPngMailSpamer",function(){return c}),n.d(t,"rollbackPngWallSpamer",function(){return l}),n.d(t,"rollbackDocSpamer",function(){return d}),n.d(t,"rollbackPhotoSpamer",function(){return u}),n.d(t,"rollbackPhotoSpamerFromWall",function(){return p}),n.d(t,"rollbackPhotoSpamerFromMail",function(){return _}),n.d(t,"rollbackVideoSpamer",function(){return m}),n.d(t,"rollbackVideoSpamerFromWall",function(){return f}),n.d(t,"rollbackVideoSpamerFromMail",function(){return h});var g="green_item",v="red_item"}});