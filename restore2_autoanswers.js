var Restore2AA={enableSorting:function(e,a,t){var o=ge("autoanswers_table");return each(geByClass("autoanswer_deleted",o),function(e,a){re(a)}),o.children.length?(hide(e,"autoanswers_add_new","autoanswers_add_separator"),show("autoanswers_disable_sort"),addClass(o,"autoanswers_table_sorting"),void sorter.init(o,{onReorder:Restore2AA.saveSorting.pbind(a,t)})):void hide(e,o)},saveSorting:function(e,a,t,o,s){var r={act:"a_save_autoanswer_sort",id:t.getAttribute("autoanswer-id"),shared:e,hash:a,admin:cur.adminId};o&&(r.next=o.getAttribute("autoanswer-id")),s&&(r.prev=s.getAttribute("autoanswer-id")),ajax.post("restore2",r)},disableSorting:function(e){hide(e),show("autoanswers_enable_sort","autoanswers_add_new","autoanswers_add_separator");var a=ge("autoanswers_table");removeClass(a,"autoanswers_table_sorting"),a.sorter.destroy(),each(a.childNodes,function(e,a){a.removeAttribute("style")})},toggleContent:function(e){var a=ge("autoanswer_content"+e);isVisible(a)?slideUp(a,300):slideDown(a,300)},addAutoanswer:function(e){return Restore2AA.showAutoanswerEditor(0,getLang("restore_2_aa_form_save_new"),e)},editAutoanswer:function(e){return Restore2AA.showAutoanswerEditor(e,getLang("restore_2_aa_form_save"))},addAutoanswerSeparator:function(e,a){var t={act:"a_save_autoanswer_separator",shared:e,hash:a,admin:cur.adminId};ajax.post("restore2",t,{onDone:function(e){var a=ce("div",{innerHTML:e}).firstChild,t=ge("autoanswers_table");t.appendChild(a),scrollToY(getXY(a)[1],200),show("autoanswers_table","autoanswers_enable_sort")}})},showAutoanswerEditor:function(e,a,t){return t=t||0,showBox("restore2",{act:"edit_autoanswer",id:e},{params:{width:625,progress:"autoanswer_edit_progress"},onDone:function(o){btn=o.removeButtons().addButton(a,Restore2AA.saveAutoanswer.pbind(o,e,t),"",!0),btn.id="autoanswer_form_save"}}),!1},formSelectColor:function(e){if(!hasClass(e,"autoanswer_form_color_selected")){var a=geByClass1("autoanswer_form_color_selected","autoanswer_form_colors");a&&removeClass(a,"autoanswer_form_color_selected"),addClass(e,"autoanswer_form_color_selected")}},showCurImages:function(e){hide("autoanswer_form_add_images_"+e);var a=ge("autoanswer_form_cur_images_"+e);show(a),addClass(a,"autoanswer_form_image_editing")},showImagesSelect:function(e){addClass("autoanswer_form_cur_images_"+e,"autoanswer_form_image_editing")},hideImagesSelect:function(e){var a=ge("autoanswer_form_cur_images_"+e);removeClass(a,"autoanswer_form_image_editing"),geByClass1("autoanswer_form_image_selected",a)||(show("autoanswer_form_add_images_"+e),hide(a))},toggleImageSelect:function(e,a){hasClass("autoanswer_form_cur_images_"+a,"autoanswer_form_image_editing")&&toggleClass(e,"autoanswer_form_image_selected")},saveAutoanswer:function(e,a,t){var o={act:"a_save_autoanswer",id:a,name:trim(val("autoanswer_form_name")),text:val("autoanswer_form_text"),text_en:val("autoanswer_form_text_en"),text_mobile:val("autoanswer_form_text_mobile"),text_en_mobile:val("autoanswer_form_text_en_mobile"),hash_tags:val("autoanswer_form_tags"),universal:intval(hasClass("autoanswer_universal","on")),shared:t,hash:ge("autoanswer_form").getAttribute("hash"),images:"",images_mobile:""},s=geByClass1("autoanswer_form_color_selected","autoanswer_form_colors");return s&&(o.color=s.getAttribute("color-id")),o.name?cur.mobileAATemplate||o.text||o.text_en?!cur.mobileAATemplate||o.text_mobile||o.text_en_mobile?(a||(o.admin=cur.adminId),each(geByClass("autoanswer_form_image_selected","autoanswer_form_images_desktop"),function(e,a){o.images&&(o.images+=","),o.images+=a.getAttribute("image-id")}),each(geByClass("autoanswer_form_image_selected","autoanswer_form_images_mobile"),function(e,a){o.images_mobile&&(o.images_mobile+=","),o.images_mobile+=a.getAttribute("image-id")}),void ajax.post("restore2",o,{onDone:function(t){var o=ce("div",{innerHTML:t}).firstChild,s=ge("autoanswers_table");a?s.replaceChild(o,ge("autoanswer"+a)):(s.appendChild(o),scrollToY(getXY(o)[1],200),show("autoanswers_table","autoanswers_enable_sort")),e.hide()},showProgress:function(){addClass("autoanswer_form_save","button_disabled"),show("autoanswer_edit_progress")},hideProgress:function(){removeClass("autoanswer_form_save","button_disabled"),hide("autoanswer_edit_progress")}})):notaBene("autoanswer_form_text_mobile"):notaBene("autoanswer_form_text"):notaBene("autoanswer_form_name")},deleteAutoanswer:function(e,a,t){return ajax.post("restore2",{act:"a_delete_autoanswer",id:a,hash:t},{onDone:function(t){var o=ge("autoanswer"+a);t?slideUp(o,200,function(){re(o),ge("autoanswers_table").children.length||hide("autoanswers_table","autoanswers_enable_sort")}):(hide(e,"autoanswer_edit"+a),show("autoanswer_restore"+a),addClass(o,"autoanswer_deleted"))}}),!1},restoreAutoanswer:function(e,a,t){return ajax.post("restore2",{act:"a_restore_autoanswer",id:a,hash:t},{onDone:function(){hide(e),show("autoanswer_edit"+a,"autoanswer_delete"+a);var t=ge("autoanswer"+a),o=ge("autoanswers_table");removeClass(t,"autoanswer_deleted"),o.removeChild(t),o.appendChild(t)}}),!1}};try{stManager.done("internal/restore2_autoanswers.js")}catch(e){}