!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=586)}({212:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e);var o=window,s=o.re,r=o.geByClass,a=o.geByClass1,d=o.domInsertBefore;window.StoriesAdminPanel=function(){function t(e,n){i(this,t),this.type=e,this.input=ge("stories_admin_panel_link_input"),this.submitButton=ge("stories_admin_panel_input_submit_button"),this.addByDomainHash=n.addByDomainHash,this.addByIdHash=n.addByIdHash,this.excludeByIdHash=n.excludeByIdHash,"blacklist"===this.type&&(this.isBlacklist=!0),"whitelist"===this.type&&(this.isWhitelist=!0),this._addSubmitEvent();var o=r("_stories_admin_panel_exclude_button");o.forEach(this._addExcludeEvent.bind(this))}return t.prototype._addSubmitEvent=function(){this.isBlacklist?addEvent(this.submitButton,"click",this._submitNewBlacklistedOwner.bind(this)):this.isWhitelist&&addEvent(this.submitButton,"click",this._submitNewWhitelistedGroup.bind(this))},t.prototype._addExcludeEvent=function(t){addEvent(t,"click",this._excludeOwner.bind(this))},t.prototype._excludeOwner=function(t){cancelEvent(t);var e=t.target,n=e.dataset.id,i=hasClass(e,"cancel-button");this.isBlacklist?this._processExcludeClick(e,n,i,this._processBanOwner,this._processExcludeOwner):this.isWhitelist&&this._processExcludeClick(e,n,i,this._processAddGroupToWhitelist,this._processExcludeGroupFromWhitelist)},t.prototype._processExcludeClick=function(t,e,n,i,o){var s=this;n?i(e,null,function(){s._replaceToExcludeButton(t)},getLang("stories_admin_unknown_error_reload"),this.addByIdHash):o(e,function(){s._replaceToCancelButton(t)},getLang("stories_admin_unknown_error_reload"),this.excludeByIdHash)},t.prototype._submitNewBlacklistedOwner=function(){var t=val(this.input);this._processBanOwner(null,t,this._appendNewItem.bind(this),getLang("stories_admin_bad_owner_link"),this.addByDomainHash)},t.prototype._submitNewWhitelistedGroup=function(){var t=val(this.input);this._processAddGroupToWhitelist(null,t,this._appendNewItem.bind(this),getLang("stories_admin_bad_group_link"),this.addByDomainHash)},t.prototype._processExcludeOwner=function(t,e,n,i){ajax.post("stories_discover_admin.php",{act:"unban_owner",hash:i,owner_id:t},{loader:!0,onDone:e,onFail:function(){return showFastBox(getLang("global_error_occured"),n)}})},t.prototype._processBanOwner=function(t,e,n,i,o){ajax.post("stories_discover_admin.php",{act:"ban_owner",hash:o,owner_id:t,domain:e},{loader:!0,onDone:n,onFail:function(){return showFastBox(getLang("global_error_occured"),i)}})},t.prototype._processExcludeGroupFromWhitelist=function(t,e,n,i){ajax.post("stories_communities_admin.php",{act:"exclude_group_from_whitelist",hash:i,owner_id:t},{loader:!0,onDone:e,onFail:function(){return showFastBox(getLang("global_error_occured"),n)}})},t.prototype._processAddGroupToWhitelist=function(t,e,n,i,o){ajax.post("stories_communities_admin.php",{act:"add_group_to_whitelist",hash:o,owner_id:t,domain:e},{loader:!0,onDone:n,onFail:function(){return showFastBox(getLang("global_error_occured"),i)}})},t.prototype._replaceToCancelButton=function(t){t.innerText=getLang("global_cancel"),addClass(t,"cancel-button")},t.prototype._replaceToExcludeButton=function(t){t.innerText=getLang("stories_admin_remove_from_list"),removeClass(t,"cancel-button")},t.prototype._appendNewItem=function(t){val(this.input,"");var e=se(t);s(e.id);var n=a("_stories_admin_panel_owner_card");d(e,n),this._addExcludeEvent(a("_stories_admin_panel_exclude_button",e))},t}();try{stManager.done(jsc("internal/stories_admin_panel.js"))}catch(c){}},586:function(t,e,n){t.exports=n(212)}});